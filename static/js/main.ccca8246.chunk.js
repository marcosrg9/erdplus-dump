(this["webpackJsonperdplus.web"]=this["webpackJsonperdplus.web"]||[]).push([[0],{223:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(1),i=a.n(r),c=a(26),s=a.n(c),o=(a(223),a(11)),l=a(12),d=a(14),u=a(13),h=a(2),m=a(29),p=a(10),b=a(200),j=a(385),g=a(9),f=a(318),O=a(354),x=a(357),v=a(24),y=a(31),C=Object(y.createActions)({login:["email","password","history"],loginSuccess:["session"],loginFailure:null,logout:["history"],logoutSuccess:null,verifyToken:["history"],verifyTokenSuccess:["session"],verifyTokenFailure:null,googleLogin:["idToken","history"],setShowSocialMigrationWarning:["show"]}),w=C.Types,D=C.Creators,S=Object(y.createReducer)({verifyTokenComplete:!1,isLoggedIn:!1,session:{},showSocialMigrationWarning:!1},{[w.LOGIN]:function(e){return e},[w.LOGIN_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{session:t.session,isLoggedIn:!0})},[w.LOGIN_FAILURE]:function(e){return e},[w.LOGOUT]:function(e){return e},[w.LOGOUT_SUCCESS]:function(e){return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!1,session:{},showSocialMigrationWarning:!1})},[w.VERIFY_TOKEN]:function(e){return e},[w.VERIFY_TOKEN_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{session:t.session,isLoggedIn:!0,verifyTokenComplete:!0})},[w.VERIFY_TOKEN_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{isLoggedIn:!1,verifyTokenComplete:!0,showSocialMigrationWarning:!1})},[w.GOOGLE_LOGIN]:function(e){return e},[w.SET_SHOW_SOCIAL_MIGRATION_WARNING]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showSocialMigrationWarning:t.show})}}),A=w,E=D,I=Object(y.createActions)({setBusy:null,clearBusy:null,showToast:["message"],hideToast:null}),T=I.Types,k=I.Creators,N=Object(y.createReducer)({busy:!1,toast:!1,toastMessage:""},{[T.SET_BUSY]:function(e){return Object(h.a)(Object(h.a)({},e),{},{busy:!0})},[T.CLEAR_BUSY]:function(e){return Object(h.a)(Object(h.a)({},e),{},{busy:!1})},[T.SHOW_TOAST]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{toast:!0,toastMessage:t.message})},[T.HIDE_TOAST]:function(e){return Object(h.a)(Object(h.a)({},e),{},{toast:!1})}}),M=k,R=a(110),F=a.n(R),P=a(395),_=a(359),L=a(111),B=a.n(L),U=a(180),G=a.n(U),q=a(177),z=a.n(q),W=a(319),H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleLogout=function(){e.props.logout(e.props.history)},e.hideToast=function(){e.props.hideToast()},e.socialMigrateClose=function(){e.props.setShowSocialMigrationWarning(!1)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,a=(e.showSocialMigrationWarning,e.name),r=e.busy,i=e.toast,c=e.toastMessage,s=e.classes;return Object(n.jsxs)("header",{className:s.header,children:[Object(n.jsx)(O.a,{position:"static",color:"primary",children:Object(n.jsxs)(x.a,{children:[Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/",children:Object(n.jsx)(z.a,{})}),Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/faq",children:"FAQ"}),!t&&Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/standalone",children:"Try It!"}),t&&Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/account",children:a}),t&&Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/documents",children:"Documents"}),t&&Object(n.jsx)(f.a,{className:s.button,onClick:this.handleLogout,children:"Logout"}),!t&&Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/create-account",children:"Signup"}),!t&&Object(n.jsx)(f.a,{className:s.button,component:v.a,to:"/login",children:"Login"}),r&&Object(n.jsx)(F.a,{className:s.spinner})]})}),Object(n.jsx)(P.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:i,autoHideDuration:7e3,onClose:this.hideToast,children:Object(n.jsx)(_.a,{"aria-describedby":"client-snackbar",className:s.snackbar,message:Object(n.jsxs)("span",{id:"client-snackbar",className:s.snackbarMessage,children:[Object(n.jsx)(B.a,{className:s.snackbarIcon}),c]}),action:Object(n.jsx)(W.a,{"aria-label":"Close",color:"inherit",className:s.snackbarClose,onClick:this.hideToast,children:Object(n.jsx)(G.a,{})},"close"),children:Object(n.jsx)(B.a,{})})})]})}}]),a}(r.Component),K=Object(g.a)((function(e){return{header:{zIndex:e.zIndex.appBar},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},button:{color:"#ffffff"},spinner:{animation:"$rotator 1.4s linear infinite",width:50,height:50},snackbar:{backgroundColor:e.palette.error.dark},snackbarClose:{padding:e.spacing(.5)},snackbarIcon:{opacity:.9,marginRight:e.spacing(1)},snackbarMessage:{display:"flex",alignItems:"center"},socialMigrate:{backgroundColor:e.palette.error.dark},socialMigrateMessage:{display:"flex",alignItems:"center",width:"500px"}}}))(Object(m.f)(Object(p.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,showSocialMigrationWarning:e.auth.showSocialMigrationWarning,name:e.auth.session.name,busy:e.global.busy,toast:e.global.toast,toastMessage:e.global.toastMessage}}),(function(e){return{logout:function(t){return e(E.logout(t))},hideToast:function(){return e(M.hideToast())},setShowSocialMigrationWarning:function(t){return e(E.setShowSocialMigrationWarning(t))}}}))(H))),Y=a(360),V=a(392),Q=a(75),J=a(204),X=Object(y.createActions)({createAccount:["name","email","password","history"],getAccount:null,getAccountSuccess:["account"],getAccountFailure:null,editName:null,updateTemporaryName:["temporaryName"],cancelEditName:null,updateAccount:["name"],updateAccountSuccess:["account"],updateAccountFailure:null,editPassword:null,cancelEditPassword:null,changePassword:["currentPassword","newPassword"],changePasswordSuccess:null,changePasswordFailure:null,changeConfirmDeleteAccount:["confirmDeleteAccount"],deleteAccount:["history"],deleteAccountSuccess:null,deleteAccountFailure:null,doSocialMigration:["email","password","history"]}),Z=X.Types,$=X.Creators,ee=Object(y.createReducer)({account:{},name:"",role:"",createdAt:"",temporaryName:"",showEditName:!1,showEditPassword:!1,confirmDeleteAccount:!1},{[Z.CREATE_ACCOUNT]:function(e){return e},[Z.GET_ACCOUNT]:function(e){return e},[Z.GET_ACCOUNT_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt})},[Z.GET_ACCOUNT_FAILURE]:function(e){return e},[Z.EDIT_NAME]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditName:!0,temporaryName:e.name})},[Z.UPDATE_TEMPORARY_NAME]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{temporaryName:t.temporaryName})},[Z.CANCEL_EDIT_NAME]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditName:!1})},[Z.UPDATE_ACCOUNT]:function(e){return e},[Z.UPDATE_ACCOUNT_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showEditName:!1,account:t.account,name:t.account.name,role:t.account.role,createdAt:t.account.createdAt})},[Z.UPDATE_ACCOUNT_FAILURE]:function(e){return e},[Z.EDIT_PASSWORD]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditPassword:!0})},[Z.CANCEL_EDIT_PASSWORD]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditPassword:!1})},[Z.CHANGE_PASSWORD]:function(e){return e},[Z.CHANGE_PASSWORD_SUCCESS]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditPassword:!1})},[Z.CHANGE_PASSWORD_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditPassword:!1})},[Z.CHANGE_CONFIRM_DELETE_ACCOUNT]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{confirmDeleteAccount:t.confirmDeleteAccount})},[Z.DELETE_ACCOUNT]:function(e){return e},[Z.DELETE_ACCOUNT_SUCCESS]:function(e){return e},[Z.DELETE_ACCOUNT_FAILURE]:function(e){return e},[Z.DO_SOCIAL_MIGRATION]:function(e){return e}}),te=Z,ae=$,ne=a(27),re=a(366),ie=a(390),ce=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1,migrateEmail:"",isMigrateEmailDirty:!1},e.handleEditName=function(){e.props.editName()},e.handleNameChange=function(t){var a=t.target.value;e.props.updateTemporaryName(a)},e.handleCancelEditName=function(){e.props.cancelEditName()},e.handleSaveEditName=function(){var t=e.props,a=t.temporaryName;(0,t.updateAccount)(a)},e.handleChangePassword=function(){e.setState({currentPassword:"",newPassword:"",newPassword2:"",isCurrentPasswordDirty:!1,isNewPasswordDirty:!1,isNewPassword2Dirty:!1}),e.props.editPassword()},e.handleCancelChangePassword=function(){e.props.cancelEditPassword()},e.handleSaveChangePassword=function(){var t=e.state,a=t.currentPassword,n=t.newPassword;e.props.changePassword(a,n)},e.handleCurrentPasswordChange=function(t){e.setState({currentPassword:t.target.value,isCurrentPasswordDirty:!0})},e.handleNewPasswordChange=function(t){e.setState({newPassword:t.target.value,isNewPasswordDirty:!0})},e.handleNewPassword2Change=function(t){e.setState({newPassword2:t.target.value,isNewPassword2Dirty:!0})},e.handleMigrateEmailChange=function(t){e.setState({migrateEmail:t.target.value,isMigrateEmailDirty:!0})},e.handleSocialMigration=function(){var t=e.state,a=t.migrateEmail,n=t.newPassword;e.props.doSocialMigration(a,n,e.props.history)},e.handleConfirmDeleteChanged=function(){var t=e.props,a=t.confirmDeleteAccount;(0,t.changeConfirmDeleteAccount)(!a)},e.deleteAccount=function(){e.props.deleteAccount(e.props.history)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/account")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.name,r=e.temporaryName,i=e.showEditName,c=e.showEditPassword,s=e.confirmDeleteAccount,o=this.props.session.identity,l=null;if(this.props.account.email){var d=this.props.account.email,u=this.state,h=u.currentPassword,m=u.newPassword,p=u.newPassword2,b=u.isCurrentPasswordDirty,j=u.isNewPasswordDirty,g=u.isNewPassword2Dirty,O=!h||m.length<8||m!==p,x=b&&0===h.length?"Enter current password":"",v=j&&m.length<8?"Password must be longer than 8 characters":"",y=g&&m!==p?"Passwords do not match":"";l=Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:3}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(J.a,{className:t.paper,elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h6",children:"Change Password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"body1",children:d})}),c&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"currentPassword",label:"Current Password",margin:"normal",className:t.textField,type:"password",helperText:x,value:h,onChange:this.handleCurrentPasswordChange})}),c&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"newPassword",label:"New Password",margin:"normal",className:t.textField,type:"password",helperText:v,value:m,onChange:this.handleNewPasswordChange})}),c&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"newPassword2",label:"Confirm New Password",margin:"normal",className:t.textField,type:"password",helperText:y,value:p,onChange:this.handleNewPassword2Change})}),Object(n.jsxs)(Y.a,{item:!0,xs:12,className:t.buttonGridItem,children:[!c&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",onClick:this.handleChangePassword,children:"Change"}),c&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",onClick:this.handleCancelChangePassword,children:"Cancel"}),c&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSaveChangePassword,disabled:O,children:"Save"})]})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:3})]})}var C=null;return this.props.account.googleId&&(C=Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:3}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(J.a,{className:t.paper,elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h6",children:"Logged in with Google"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"body1",children:this.props.account.googleId})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:3})]})),Object(n.jsxs)("section",{className:t.section,children:[Object(n.jsx)(K,{}),Object(n.jsx)(Y.a,{container:!0,className:t.grid,spacing:3,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Account Information"})})}),Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:3}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(J.a,{className:t.paper,elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h6",children:"Name"})}),Object(n.jsxs)(Y.a,{item:!0,xs:12,children:[!i&&Object(n.jsx)(Q.a,{variant:"body1",children:a}),i&&Object(n.jsx)(V.a,{id:"name",margin:"normal",className:t.textField,value:r,onChange:this.handleNameChange})]}),Object(n.jsxs)(Y.a,{item:!0,xs:12,className:t.buttonGridItem,children:[!i&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",onClick:this.handleEditName,children:"Edit"}),i&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",onClick:this.handleCancelEditName,children:"Cancel"}),i&&Object(n.jsx)(f.a,{className:t.button,variant:"outlined",color:"primary",onClick:this.handleSaveEditName,children:"Save"})]})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:3})]}),"email"===o&&l,"google"===o&&C,Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:3}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(J.a,{className:t.paper,elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:t.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h6",children:"Delete Account"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(re.a,{control:Object(n.jsx)(ie.a,{checked:s,onChange:this.handleConfirmDeleteChanged}),label:"Permanently delete account. The account will be deleted as soon as you press 'Delete' below."})}),Object(n.jsx)(Y.a,{item:!0,xs:12,className:t.buttonGridItem,children:!i&&Object(n.jsx)(f.a,{className:t.button,color:"primary",variant:s?"contained":"outlined",disabled:!s,onClick:this.deleteAccount,children:"Delete"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:3})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"string"===typeof e.account.email&&t.migrateEmail!==e.account.email?{migrateEmail:e.account.email}:null}}]),a}(r.Component),se=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{paddingTop:e.spacing(3),textAlign:"center"},paper:{padding:e.spacing(3)},textField:{width:"100%"},buttonGridItem:{width:"100%",textAlign:"right"},button:{marginLeft:e.spacing(1),width:120}}}))(Object(m.f)(Object(p.b)((function(e){return{name:e.account.name,temporaryName:e.account.temporaryName,showEditName:e.account.showEditName,showEditPassword:e.account.showEditPassword,createdAt:e.account.createdAt,account:e.account.account,session:e.auth.session,confirmDeleteAccount:e.account.confirmDeleteAccount}}),(function(e){return{editName:function(){return e(ae.editName())},updateTemporaryName:function(t){return e(ae.updateTemporaryName(t))},cancelEditName:function(){return e(ae.cancelEditName())},updateAccount:function(t){return e(ae.updateAccount(t))},editPassword:function(){return e(ae.editPassword())},changePassword:function(t,a){return e(ae.changePassword(t,a))},cancelEditPassword:function(){return e(ae.cancelEditPassword())},changeConfirmDeleteAccount:function(t){return e(ae.changeConfirmDeleteAccount(t))},deleteAccount:function(t){return e(ae.deleteAccount(t))},doSocialMigration:function(t,a,n){return e(ae.doSocialMigration(t,a,n))}}}))(ce))),oe=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},e.handleSubmit=function(){var t=e.state,a=t.name,n=t.email,r=t.password;e.props.createAccount(a,n,r,e.props.history)},e.handleNameChange=function(t){e.setState({name:t.target.value})},e.handleEmailChange=function(t){e.setState({email:t.target.value})},e.handlePasswordChange=function(t){e.setState({password:t.target.value,isPasswordDirty:!0})},e.handleConfirmPasswordChange=function(t){e.setState({confirmPassword:t.target.value,isConfirmPasswordDirty:!0})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/create-account")}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,r=e.password,i=e.confirmPassword,c=e.isPasswordDirty,s=e.isConfirmPasswordDirty,o=this.props.classes,l=!t||!a||!r||r.length<8||r!==i,d=c&&r.length<8?"Password must be longer than 8 characters":"",u=s&&r!==i?"Passwords do not match":"";return Object(n.jsxs)("section",{className:o.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,className:o.grid,spacing:24,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Create Account"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"name",label:"Name",margin:"normal",className:o.textField,value:t,onChange:this.handleNameChange})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"email",label:"Email",margin:"normal",className:o.textField,value:a,onChange:this.handleEmailChange})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"password",label:"Password",margin:"normal",className:o.textField,value:r,onChange:this.handlePasswordChange,helperText:d,type:"password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:o.textField,value:i,onChange:this.handleConfirmPasswordChange,helperText:u,type:"password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{className:o.submitButton,variant:"outlined",color:"primary",disabled:l,onClick:this.handleSubmit,children:"Create Account"})})]})]})}}]),a}(r.Component),le=Object(g.a)((function(e){return{textField:{width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}}}))(Object(m.f)(Object(p.b)((function(e){return{}}),(function(e){return{createAccount:function(t,a,n,r){return e(ae.createAccount(t,a,n,r))}}}))(oe))),de=a(34),ue=a(365),he=a(140),me=a(182),pe=a.n(me);var be=a(320),je=a(367),ge=a(368),fe=a(186),Oe=a.n(fe),xe=a(185),ve=a.n(xe),ye=a(369),Ce=a(183),we=a.n(Ce),De=a(184),Se=a.n(De),Ae=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).toggle=function(t){t.stopPropagation();var a=e.props,n=a.folder,r=a.expandFolder,i=a.collapseFolder;n.isOpen?i(n.id):r(n.id)},e.select=function(){e.props.selectFolder(e.props.folder.id)},e}return Object(l.a)(a,[{key:"render",value:function(){var e,t,a,r=this.props,i=r.classes,c=r.folder,s=r.expandFolder,o=r.collapseFolder,l=r.selectFolder,d=c.children.length>0,u=(e=be.a,function(t,a){var r="function"===typeof t?function(e){return{root:t(e)}}:{root:t};return Object(g.a)(r,a)((function(t){var a=t.classes,r=t.className,i=Object(he.a)(t,["classes","className"]);return Object(n.jsx)(e,Object(h.a)({className:pe()(a.root,r)},i))}))})((function(e){return{height:48,paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(2)*c.depth}}));d&&(t=c.isOpen?Object(n.jsx)(W.a,{className:i.iconButton,"aria-label":"Collapse",onClick:this.toggle,children:Object(n.jsx)(we.a,{})}):Object(n.jsx)(W.a,{className:i.iconButton,"aria-label":"Expand",onClick:this.toggle,children:Object(n.jsx)(Se.a,{})})),c.isSelected&&(a=i.selected);var m="root"===c.folderType?"Diagrams":c.name;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:a,children:Object(n.jsxs)(u,{button:!0,onClick:this.select,children:[Object(n.jsx)(je.a,{children:c.isOpen?Object(n.jsx)(ve.a,{}):Object(n.jsx)(Oe.a,{})}),Object(n.jsx)(ge.a,{inset:!0,primary:m}),t]})}),Object(n.jsx)(ye.a,{in:c.isOpen,timeout:"auto",unmountOnExit:!0,children:Object(n.jsx)(ue.a,{component:"div",disablePadding:!0,children:c.children.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return Object(n.jsx)(Ee,{folder:e,expandFolder:s,collapseFolder:o,selectFolder:l},e.id)}))})})]})}}]),a}(r.Component),Ee=Object(g.a)((function(e){return{iconButton:{margin:e.spacing(1)},listItemDefault:{height:48,paddingTop:0,paddingBottom:0},selected:{backgroundColor:e.palette.action.selected}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Ae)),Ie=Ee,Te=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.folderTree,r=e.expandFolder,i=e.collapseFolder,c=e.selectFolder;return Object(n.jsx)(ue.a,{className:t.root,component:"nav",children:a.map((function(e){return Object(n.jsx)(Ie,{folder:e,expandFolder:r,collapseFolder:i,selectFolder:c},e.id)}))})}}]),a}(r.Component),ke=Object(g.a)((function(e){return{root:{height:"100%",width:"100%",backgroundColor:e.palette.background.paper},nested:{paddingLeft:e.spacing(1)}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Te)),Ne=a(66),Me=function(e){return e.diagram.diagrams},Re=Object(Ne.a)([Me,function(e){return e.folder.currentFolderId}],(function(e,t){return e.filter((function(e){return e.folderId===t}))})),Fe=Object(Ne.a)([Me,function(e,t){return t.history.location.pathname}],(function(e,t){var a=t.split("/");if(3===a.length&&"edit-diagram"===a[1]){var n=a[2];return e.find((function(e){return e.id===n}))}return null})),Pe=a(372),_e=a(187),Le=a.n(_e),Be=a(188),Ue=a.n(Be),Ge=a(203),qe=a(370),ze=a(371),We=Object(y.createActions)({getDiagrams:null,getDiagramsSuccess:["diagrams"],getDiagramsFailure:null,saveDiagram:["diagram"],saveDiagramSuccess:["diagram"],saveDiagramFailure:null,createDiagram:["diagram"],createDiagramSuccess:["diagram"],createDiagramFailure:null,createDiagramDialogShow:null,setCreateDiagramName:["name"],setCreateDiagramType:["typ"],createDiagramDialogCancel:null,renameDiagramDialogShow:["diagram"],renameDiagramDialogCancel:null,renameDiagramNameChanged:["name"],importDiagramDialogShow:null,importDiagramDialogCancel:null,dropImportFile:["file","currentFolderId"],dropImportFileSuccess:["fileResult"],dropImportFileFailure:["fileResult"],removeImportFile:["index"],importDiagrams:["diagrams"],importDiagramsSuccess:["diagrams"],importDiagramsFailure:null,deleteDiagram:["diagramId"],deleteDiagramSuccess:null,deleteDiagramFailure:null,moveToFolderDialogShow:null,moveToFolderDialogCancel:null,saveManyDiagrams:["diagrams"],saveManyDiagramsSuccess:["diagrams"],saveManyDiagramsFailure:null,setDocumentsPageMode:["mode"]}),He=We.Types,Ke=We.Creators,Ye=Object(y.createReducer)({diagrams:[],showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er",showRenameDiagramDialog:!1,showImportDiagramDialog:!1,showMoveToFolderDialog:!1,renameDiagramName:null,renameDiagramId:null,dropImportFileResults:[],documentsPageMode:"list"},{[He.GET_DIAGRAMS]:function(e){return e},[He.GET_DIAGRAMS_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{diagrams:t.diagrams})},[He.GET_DIAGRAMS_FAILURE]:function(e){return e},[He.SAVE_DIAGRAM]:function(e){return e},[He.SAVE_DIAGRAM_SUCCESS]:function(e,t){var a=e.diagrams.filter((function(e){return e.id!==t.diagram.id}));return Object(h.a)(Object(h.a)({},e),{},{diagrams:[].concat(Object(de.a)(a),[t.diagram])})},[He.SAVE_DIAGRAM_FAILURE]:function(e){return e},[He.CREATE_DIAGRAM]:function(e){return e},[He.CREATE_DIAGRAM_SUCCESS]:function(e,t){var a=e.diagrams;return Object(h.a)(Object(h.a)({},e),{},{diagrams:[].concat(Object(de.a)(a),[t.diagram]),showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"})},[He.CREATE_DIAGRAM_DIALOG_SHOW]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showCreateDiagramDialog:!0})},[He.CREATE_DIAGRAM_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showCreateDiagramDialog:!1,createDiagramName:"",createDiagramType:"er"})},[He.SET_CREATE_DIAGRAM_NAME]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{createDiagramName:t.name})},[He.SET_CREATE_DIAGRAM_TYPE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{createDiagramType:t.typ})},[He.RENAME_DIAGRAM_DIALOG_SHOW]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showRenameDiagramDialog:!0,renameDiagramName:t.diagram.name,renameDiagramId:t.diagram.id})},[He.RENAME_DIAGRAM_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showRenameDiagramDialog:!1,renameDiagramName:"",renameDiagramId:null})},[He.IMPORT_DIAGRAM_DIALOG_SHOW]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showImportDiagramDialog:!0,dropImportFileResults:[]})},[He.IMPORT_DIAGRAM_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showImportDiagramDialog:!1})},[He.DROP_IMPORT_FILE]:function(e){return e},[He.DROP_IMPORT_FILE_SUCCESS]:function(e,t){var a=e.dropImportFileResults;return Object(h.a)(Object(h.a)({},e),{},{dropImportFileResults:[].concat(Object(de.a)(a),[t.fileResult])})},[He.DROP_IMPORT_FILE_FAILURE]:function(e,t){var a=e.dropImportFileResults;return Object(h.a)(Object(h.a)({},e),{},{dropImportFileResults:[].concat(Object(de.a)(a),[t.fileResult])})},[He.REMOVE_IMPORT_FILE]:function(e,t){var a=Object(de.a)(e.dropImportFileResults);return a.splice(t.index,1),Object(h.a)(Object(h.a)({},e),{},{dropImportFileResults:a})},[He.RENAME_DIAGRAM_NAME_CHANGED]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{renameDiagramName:t.name})},[He.IMPORT_DIAGRAMS]:function(e){return e},[He.IMPORT_DIAGRAMS_SUCCESS]:function(e,t){var a=e.diagrams;return Object(h.a)(Object(h.a)({},e),{},{diagrams:[].concat(Object(de.a)(a),Object(de.a)(t.diagrams)),dropImportFileResults:[],showImportDiagramDialog:!1})},[He.IMPORT_DIAGRAMS_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showImportDiagramDialog:!1})},[He.DELETE_DIAGRAM]:function(e){return e},[He.DELETE_DIAGRAM_SUCCESS]:function(e){return e},[He.DELETE_DIAGRAM_FAILURE]:function(e){return e},[He.MOVE_TO_FOLDER_DIALOG_SHOW]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showMoveToFolderDialog:!0})},[He.MOVE_TO_FOLDER_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showMoveToFolderDialog:!1})},[He.SAVE_MANY_DIAGRAMS]:function(e){return e},[He.SAVE_MANY_DIAGRAMS_SUCCESS]:function(e,t){var a=t.diagrams.map((function(e){return e.id})),n=e.diagrams.filter((function(e){return-1===a.indexOf(e.id)}));return Object(h.a)(Object(h.a)({},e),{},{documentsPageMode:"list",diagrams:[].concat(Object(de.a)(n),Object(de.a)(t.diagrams))})},[He.SAVE_MANY_DIAGRAMS_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{documentsPageMode:"list"})},[He.SET_DOCUMENTS_PAGE_MODE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{documentsPageMode:t.mode})}}),Ve=He,Qe=Ke,Je=Object(y.createActions)({showConvertToRelationalDialog:["diagramId","name"],hideConvertToRelationalDialog:null,convertToRelational:["folderId","name","content","edit","history"],nameChanged:["name"],generateSql:["content"],generateSqlSuccess:["sql"],generateSqlFailure:null,hideConvertSqlDialog:null,setSqlCopied:null}),Xe=Je.Types,Ze=Je.Creators,$e=Object(y.createReducer)({showDialog:!1,autoFocusName:!1,diagramId:0,name:"",sql:"",showConvertSqlDialog:!1,sqlCopied:!1},{[Xe.SHOW_CONVERT_TO_RELATIONAL_DIALOG]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showDialog:!0,autoFocusName:!0,diagramId:t.diagramId,name:t.name})},[Xe.HIDE_CONVERT_TO_RELATIONAL_DIALOG]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showDialog:!1,autoFocusName:!1})},[Xe.CONVERT_TO_RELATIONAL]:function(e){return e},[Xe.NAME_CHANGED]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{name:t.name,autoFocusName:!1})},[Xe.GENERATE_SQL]:function(e){return e},[Xe.GENERATE_SQL_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showConvertSqlDialog:!0,sqlCopied:!1,sql:t.sql})},[Xe.GENERATE_SQL_FAILURE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showConvertSqlDialog:!0,sql:"Error"})},[Xe.HIDE_CONVERT_SQL_DIALOG]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showConvertSqlDialog:!1,sql:""})},[Xe.SET_SQL_COPIED]:function(e){return Object(h.a)(Object(h.a)({},e),{},{sqlCopied:!0})}}),et=Xe,tt=Ze,at=function(e){return e.folder.folders},nt=Object(Ne.a)([at,function(e){return e.folder.foldersMeta},function(e){return e.folder.currentFolderId}],(function(e,t,a){if(0===e.length)return[];var n=e.map((function(e){var n=t.find((function(t){return t.id===e.id}));return Object(h.a)(Object(h.a)(Object(h.a)({},n),e),{},{isSelected:e.id===a})})),r=n.find((function(e){return"root"===e.folderType})),i=n.find((function(e){return"trash"===e.folderType}));r.depth=0,i.depth=0,i.children=[];return function e(t){var a=n.filter((function(e){return e.parentId===t.id}));a.forEach((function(a){a.depth=t.depth+1,e(a)})),t.children=a}(r),[r,i]})),rt=(Object(Ne.a)([at],(function(e){if(0===e.length)return[];var t=e.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{isOpen:!1,isSelected:!1})})),a=t.find((function(e){return"root"===e.folderType}));a.isOpen=!0,a.depth=0;return function e(a){var n=t.filter((function(e){return e.parentId===a.id}));n.forEach((function(t){t.depth=a.depth+1,e(t)})),a.children=n}(a),[a]})),Object(Ne.a)([at],(function(e){if(e.length>0){var t=e.find((function(e){return"trash"===e.folderType}));if(t)return t.id}return null}))),it=window.saveAs,ct="er",st="relational",ot="star",lt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={menuAnchor:null,diagramId:null,diagramType:null,isMoving:!1,selectedIds:[]},e.handleClick=function(t){var a=e.props,n=a.mode,r=a.onSelectDiagram,i=a.history,c=a.currentFolderId,s=a.trashFolderId;"select"===n?r(t):c!==s&&i.push("/edit-diagram/".concat(t))},e.handleMenuClick=function(t,a,n){e.setState({menuAnchor:t,diagramId:a,diagramType:n})},e.handleMenuClose=function(){e.setState({menuAnchor:null,diagramId:null,diagramType:null})},e.handleOpen=function(){e.handleClick(e.state.diagramId),e.handleMenuClose()},e.handleRename=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId}));e.handleMenuClose(),e.props.renameDiagramDialogShow(t)},e.handleTrash=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId}));e.props.saveDiagram(Object(h.a)(Object(h.a)({},t),{},{folderId:e.props.trashFolderId})),e.handleMenuClose()},e.handleCopy=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId})),a={folderId:t.folderId,name:"".concat(t.name," Copy"),diagramType:t.diagramType,content:t.content};e.props.createDiagram(a),e.handleMenuClose()},e.handleExport=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId})),a=new Blob([t.content],{type:"text/plain;charset=utf-8"});it(a,"".concat(t.name,".erdplus")),e.handleMenuClose()},e.handleConvertToRelational=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId}));e.handleMenuClose(),e.props.showConvertToRelationalDialog(t.id,t.name)},e.handleGenerateSql=function(){var t=e.props.currentFolderDiagrams.find((function(t){return t.id===e.state.diagramId}));e.handleMenuClose(),e.props.generateSql(t.content)},e.typeToName=function(e){return e===ct?"ER Diagram":e===st?"Relational Schema":e===ot?"Star Schema":""},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.menuAnchor,r=t.diagramType,i=this.props,c=i.currentFolderDiagrams,s=i.classes,o=i.mode,l=i.selectedIds,d=i.currentFolderId,u=i.trashFolderId;c.sort((function(e,t){return e.name.localeCompare(t.name)}));var h=d===u;return Object(n.jsxs)(ue.a,{className:s.root,children:[Object(n.jsxs)(Ge.a,{id:"diagram-menu",open:Boolean(a),anchorEl:a,onClose:this.handleMenuClose,children:[Object(n.jsx)(qe.a,{onClick:this.handleOpen,children:"Open ..."}),Object(n.jsx)(ze.a,{}),Object(n.jsx)(qe.a,{onClick:this.handleRename,children:"Rename ..."}),Object(n.jsx)(qe.a,{onClick:this.handleTrash,children:"Move to Trash"}),Object(n.jsx)(qe.a,{onClick:this.handleCopy,children:"Copy"}),Object(n.jsx)(qe.a,{onClick:this.handleExport,children:"Export"}),Object(n.jsx)(qe.a,{onClick:this.handleConvertToRelational,disabled:"er"!==r,children:"Convert to Relational Schema"}),Object(n.jsx)(qe.a,{onClick:this.handleGenerateSql,disabled:"er"===r,children:"Generate SQL"})]}),c.map((function(t,r){return Object(n.jsxs)(be.a,{button:!h,onClick:function(){return e.handleClick(t.id)},children:["select"===o&&Object(n.jsx)(ie.a,{checked:l.includes(t.id),tabIndex:r}),Object(n.jsx)(je.a,{children:Object(n.jsx)(Le.a,{})}),Object(n.jsx)(ge.a,{primary:t.name,secondary:e.typeToName(t.diagramType)}),Object(n.jsx)(ge.a,{secondary:window.moment(t.updatedAt).fromNow(),className:s.lastModified}),!h&&Object(n.jsx)(Pe.a,{children:Object(n.jsx)(W.a,{"aria-label":"diagram menu","aria-owns":a?"diagram-menu":null,"aria-haspopup":"true",onClick:function(a){return e.handleMenuClick(a.currentTarget,t.id,t.diagramType)},children:Object(n.jsx)(Ue.a,{})})})]},t.id)}))]})}}]),a}(r.Component),dt=Object(g.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},lastModified:{textAlign:"right",marginRight:30}}}))(Object(m.f)(Object(p.b)((function(e){return{currentFolderId:e.folder.currentFolderId,currentFolderDiagrams:Re(e),trashFolderId:rt(e)}}),(function(e){return{createDiagram:function(t){return e(Qe.createDiagram(t))},deleteDiagram:function(t){return e(Qe.deleteDiagram(t))},saveDiagram:function(t){return e(Qe.saveDiagram(t))},renameDiagramDialogShow:function(t){return e(Qe.renameDiagramDialogShow(t))},showConvertToRelationalDialog:function(t,a){return e(tt.showConvertToRelationalDialog(t,a))},generateSql:function(t){return e(tt.generateSql(t))}}}))(lt))),ut=a(378),ht=Object(y.createActions)({getFolders:null,getFoldersSuccess:["folders"],getFoldersFailure:null,expandFolder:["folderId"],collapseFolder:["folderId"],createFolderDialogShow:null,createFolderDialogCancel:null,newFolderNameChanged:["newFolderName"],createFolder:["name","parentId"],createFolderSuccess:["folder"],createFolderFailure:null,selectFolder:["folderId"],editFolderDialogShow:["folderId","name"],editFolderDialogCancel:null,editFolderNameChanged:["name"],renameFolder:["folder"],renameFolderSuccess:["folder"],renameFolderFailure:null,deleteFolderDialogShow:["folderId"],deleteFolderDialogCancel:null,deleteFolder:["folderId"],deleteFolderSuccess:null,deleteFolderFailure:null}),mt=ht.Types,pt=ht.Creators,bt=Object(y.createReducer)({folders:[],foldersMeta:[],currentFolderId:null,showNewFolder:!1,newFolderName:"",showEditFolder:!1,editFolderNewName:"",editFolderId:null,showDeleteFolder:!1,deleteFolderName:"",deleteFolderId:null},{[mt.GET_FOLDERS]:function(e){return e},[mt.GET_FOLDERS_SUCCESS]:function(e,t){var a=t.folders.map((function(e){return{id:e.id,isOpen:"root"===e.folderType}})),n=t.folders.find((function(e){return"root"===e.folderType}));return Object(h.a)(Object(h.a)({},e),{},{folders:t.folders,foldersMeta:a,currentFolderId:n?n.id:null})},[mt.GET_FOLDERS_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{folders:[],foldersMeta:[]})},[mt.EXPAND_FOLDER]:function(e,t){var a=e.foldersMeta.map((function(e){return e.id===t.folderId?Object(h.a)(Object(h.a)({},e),{},{isOpen:!0}):e}));return Object(h.a)(Object(h.a)({},e),{},{foldersMeta:a})},[mt.COLLAPSE_FOLDER]:function(e,t){var a=e.foldersMeta.map((function(e){return e.id===t.folderId?Object(h.a)(Object(h.a)({},e),{},{isOpen:!1}):e}));return Object(h.a)(Object(h.a)({},e),{},{foldersMeta:a})},[mt.CREATE_FOLDER_DIALOG_SHOW]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showNewFolder:!0,newFolderName:""})},[mt.CREATE_FOLDER_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showNewFolder:!1})},[mt.NEW_FOLDER_NAME_CHANGED]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{newFolderName:t.newFolderName})},[mt.CREATE_FOLDER]:function(e){return e},[mt.CREATE_FOLDER_SUCCESS]:function(e,t){var a=[].concat(Object(de.a)(e.foldersMeta),[{id:t.folder.id,isOpen:!1}]),n=[].concat(Object(de.a)(e.folders),[t.folder]);return Object(h.a)(Object(h.a)({},e),{},{showNewFolder:!1,folders:n,foldersMeta:a})},[mt.CREATE_FOLDER_FAILURE]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showNewFolder:!1})},[mt.SELECT_FOLDER]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{currentFolderId:t.folderId})},[mt.EDIT_FOLDER_DIALOG_SHOW]:function(e,t){var a=e.folders.find((function(e){return e.id===t.folderId}));return Object(h.a)(Object(h.a)({},e),{},{showEditFolder:!0,editFolderNewName:a.name,editFolderId:t.folderId})},[mt.EDIT_FOLDER_DIALOG_CANCEL]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showEditFolder:!1})},[mt.EDIT_FOLDER_NAME_CHANGED]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{editFolderNewName:t.name})},[mt.RENAME_FOLDER]:function(e){return e},[mt.RENAME_FOLDER_SUCCESS]:function(e,t){var a=e.folders.filter((function(e){return e.id!==t.folder.id})),n=[].concat(Object(de.a)(a),[t.folder]);return Object(h.a)(Object(h.a)({},e),{},{showEditFolder:!1,folders:n})},[mt.RENAME_FOLDER_FAILURE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showEditFolder:!1})},[mt.DELETE_FOLDER_DIALOG_SHOW]:function(e,t){var a=e.folders.find((function(e){return e.id===t.folderId}));return Object(h.a)(Object(h.a)({},e),{},{showDeleteFolder:!0,deleteFolderName:a.name,deleteFolderId:t.folderId})},[mt.DELETE_FOLDER_DIALOG_CANCEL]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showDeleteFolder:!1})},[mt.DELETE_FOLDER]:function(e){return e},[mt.DELETE_FOLDER_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showDeleteFolder:!1})},[mt.DELETE_FOLDER_FAILURE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showDeleteFolder:!1})}}),jt=mt,gt=pt,ft=Object(y.createActions)({setContext:["contextDetails","contextType"],clearContext:null,setMouseMode:["mouseMode"],setUndoRedo:["canUndo","canRedo"],setCanDelete:["canDelete"],setCanvasSize:["width","height"],showCanvasSizeDialog:["minCanvasWidth","minCanvasHeight"],hideCanvasSizeDialog:null,showExportImageDialog:["diagramContent"],hideExportImageDialog:null,createExportImageData:["diagramContent","transparent","scale"],createExportImageDataSuccess:["dataUrl","blob"],updateExportImageOptions:["transparent","scale"],setIsDirty:["isDirty"],saveEditDiagram:["diagram"]}),Ot=ft.Types,xt=ft.Creators,vt=Object(y.createReducer)({contextDetails:{},contextType:"",mouseMode:"none",canUndo:!1,canRedo:!1,canDelete:!1,canvasWidth:2e3,canvasHeight:1e3,showCanvasSizeDialog:!1,minCanvasWidth:0,minCanvasHeight:0,showExportImageDialog:!1,exportImageContent:"",exportImageTransparent:!1,exportImageScale:1,exportImageDataUrl:"",exportImageBlob:null,isDirty:!1},{[Ot.SET_CONTEXT]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{contextDetails:t.contextDetails,contextType:t.contextType})},[Ot.CLEAR_CONTEXT]:function(e){return Object(h.a)(Object(h.a)({},e),{},{contextDetails:{},contextType:""})},[Ot.SET_MOUSE_MODE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{mouseMode:t.mouseMode})},[Ot.SET_UNDO_REDO]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{canUndo:t.canUndo,canRedo:t.canRedo})},[Ot.SET_CAN_DELETE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{canDelete:t.canDelete})},[Ot.SET_CANVAS_SIZE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{canvasWidth:t.width,canvasHeight:t.height,showCanvasSizeDialog:!1})},[Ot.SHOW_CANVAS_SIZE_DIALOG]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showCanvasSizeDialog:!0,minCanvasWidth:t.minCanvasWidth,minCanvasHeight:t.minCanvasHeight})},[Ot.HIDE_CANVAS_SIZE_DIALOG]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showCanvasSizeDialog:!1})},[Ot.SHOW_EXPORT_IMAGE_DIALOG]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{showExportImageDialog:!0,exportImageContent:t.diagramContent})},[Ot.HIDE_EXPORT_IMAGE_DIALOG]:function(e){return Object(h.a)(Object(h.a)({},e),{},{showExportImageDialog:!1,exportImageDataUrl:"",exportImageBlob:null})},[Ot.CREATE_EXPORT_IMAGE_DATA]:function(e){return e},[Ot.CREATE_EXPORT_IMAGE_DATA_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{exportImageDataUrl:t.dataUrl,exportImageBlob:t.blob})},[Ot.UPDATE_EXPORT_IMAGE_OPTIONS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{exportImageTransparent:t.transparent,exportImageScale:t.scale})},[Ot.SET_IS_DIRTY]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{isDirty:t.isDirty})},[Ot.SAVE_EDIT_DIAGRAM]:function(e){return e}}),yt=Ot,Ct=xt,wt=a(393),Dt=a(376),St=a(374),At=a(375),Et=a(373),It=a(394),Tt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.createFolderDialogCancel()},e.handleSubmit=function(){e.props.createFolder(e.props.newFolderName,e.props.currentFolderId)},e.newFolderNameChanged=function(t){e.props.newFolderNameChanged(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showNewFolder,a=e.newFolderName,r=e.classes;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"new-folder-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog,children:[Object(n.jsx)(Et.a,{id:"new-folder-dialog",children:"Create New Folder"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Create a new folder."}),Object(n.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:a,onChange:this.newFolderNameChanged,className:r.input})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Create"})]})]})}}]),a}(r.Component),kt=Object(g.a)((function(e){return{dialog:{},input:{width:300}}}))(Object(p.b)((function(e){return{showNewFolder:e.folder.showNewFolder,newFolderName:e.folder.newFolderName,currentFolderId:e.folder.currentFolderId}}),(function(e){return{createFolderDialogCancel:function(){return e(gt.createFolderDialogCancel())},createFolder:function(t,a){return e(gt.createFolder(t,a))},newFolderNameChanged:function(t){return e(gt.newFolderNameChanged(t))}}}))(Object(It.a)()(Tt))),Nt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.editFolderDialogCancel()},e.handleSubmit=function(){var t=Object(h.a)(Object(h.a)({},e.props.editFolder),{},{name:e.props.editFolderNewName});e.props.renameFolder(t)},e.editFolderNameChanged=function(t){e.props.editFolderNameChanged(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showEditFolder,a=e.editFolderNewName,r=e.classes;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"edit-folder-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog,children:[Object(n.jsx)(Et.a,{id:"edit-folder-dialog",children:"Rename Folder"}),Object(n.jsx)(St.a,{children:Object(n.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:a,onChange:this.editFolderNameChanged,className:r.input})}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Rename"})]})]})}}]),a}(r.Component),Mt=Object(g.a)((function(e){return{dialog:{},input:{width:300}}}))(Object(p.b)((function(e){return{editFolder:e.folder.folders.find((function(t){return t.id===e.folder.editFolderId})),showEditFolder:e.folder.showEditFolder,editFolderNewName:e.folder.editFolderNewName,editFolderId:e.folder.editFolderId}}),(function(e){return{editFolderDialogCancel:function(){return e(gt.editFolderDialogCancel())},renameFolder:function(t){return e(gt.renameFolder(t))},editFolderNameChanged:function(t){return e(gt.editFolderNameChanged(t))}}}))(Object(It.a)()(Nt))),Rt=a(389),Ft=a(377),Pt=a(363),_t=a(364),Lt="er",Bt="relational",Ut="star",Gt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.createDiagramDialogCancel()},e.handleSubmit=function(){var t=e.props,a={folderId:t.currentFolderId,name:t.createDiagramName,diagramType:t.createDiagramType,content:JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3})};e.props.createDiagram(a)},e.handleNameChanged=function(t){e.props.setCreateDiagramName(t.target.value)},e.handleTypeChange=function(t){e.props.setCreateDiagramType(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.createDiagramName,a=e.createDiagramType,r=e.showCreateDiagramDialog,i=e.classes;return Object(n.jsxs)(wt.a,{open:r,"aria-labelledby":"new-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:i.dialog,children:[Object(n.jsx)(Et.a,{id:"new-diagram-dialog",children:"Create New Diagram"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Create a new diagram."}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,value:t,onChange:this.handleNameChanged,className:i.input})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",children:[Object(n.jsx)(_t.a,{children:"Type"}),Object(n.jsxs)(Ft.a,{value:a,onChange:this.handleTypeChange,children:[Object(n.jsx)(re.a,{value:Lt,control:Object(n.jsx)(Rt.a,{}),label:"ER Diagram"}),Object(n.jsx)(re.a,{value:Bt,control:Object(n.jsx)(Rt.a,{}),label:"Relational Schema"}),Object(n.jsx)(re.a,{value:Ut,control:Object(n.jsx)(Rt.a,{}),label:"Star Schema"})]})]})})]})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Create"})]})]})}}]),a}(r.Component),qt=Object(g.a)((function(e){return{dialog:{},input:{width:500}}}))(Object(p.b)((function(e){return{createDiagramName:e.diagram.createDiagramName,createDiagramType:e.diagram.createDiagramType,showCreateDiagramDialog:e.diagram.showCreateDiagramDialog,currentFolderId:e.folder.currentFolderId}}),(function(e){return{createDiagramDialogCancel:function(){return e(Qe.createDiagramDialogCancel())},createDiagram:function(t){return e(Qe.createDiagram(t))},setCreateDiagramName:function(t){return e(Qe.setCreateDiagramName(t))},setCreateDiagramType:function(t){return e(Qe.setCreateDiagramType(t))}}}))(Object(It.a)()(Gt))),zt=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.deleteFolderDialogCancel()},e.handleSubmit=function(){e.props.deleteFolder(e.props.deleteFolderId)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showDeleteFolder,a=e.deleteFolderName,r=e.classes;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"delete-folder-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog,children:[Object(n.jsx)(Et.a,{id:"delete-folder-dialog",children:"Delete Folder"}),Object(n.jsx)(St.a,{children:Object(n.jsxs)(At.a,{children:['Delete the folder named "',a,'" and all subfolders?',Object(n.jsxs)("p",{children:["Diagrams in the deleted folders will be deleted and ",Object(n.jsx)("br",{}),"moved to the Trash folder."]})]})}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Delete"})]})]})}}]),a}(r.Component),Wt=Object(g.a)((function(e){return{dialog:{}}}))(Object(p.b)((function(e){return{showDeleteFolder:e.folder.showDeleteFolder,deleteFolderName:e.folder.deleteFolderName,deleteFolderId:e.folder.deleteFolderId}}),(function(e){return{deleteFolderDialogCancel:function(){return e(gt.deleteFolderDialogCancel())},deleteFolder:function(t){return e(gt.deleteFolder(t))}}}))(Object(It.a)()(zt))),Ht=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.renameDiagramDialogCancel()},e.handleSubmit=function(){var t=e.props,a=t.diagram,n=t.renameDiagramName,r=t.renameDiagramDialogCancel,i=t.saveDiagram,c=Object(h.a)(Object(h.a)({},a),{},{name:n});r(),i(c)},e.handleNameChanged=function(t){var a=t.target.value;e.props.renameDiagramNameChanged(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showRenameDiagramDialog,a=e.renameDiagramName,r=e.classes;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"rename-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog,children:[Object(n.jsx)(Et.a,{id:"rename-diagram-dialog",children:"Rename New Diagram"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Rename a new diagram."}),Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:function(e){}},value:a,onChange:this.handleNameChanged,className:r.input})})})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Rename"})]})]})}}]),a}(r.Component),Kt=Object(g.a)((function(e){return{dialog:{},input:{width:500}}}))(Object(p.b)((function(e){var t=e.diagram.renameDiagramId,a=e.diagram.diagrams.find((function(e){return e.id===t}));return{showRenameDiagramDialog:e.diagram.showRenameDiagramDialog,renameDiagramName:e.diagram.renameDiagramName,renameDiagramId:t,diagram:a}}),(function(e){return{renameDiagramDialogCancel:function(){return e(Qe.renameDiagramDialogCancel())},renameDiagramNameChanged:function(t){return e(Qe.renameDiagramNameChanged(t))},saveDiagram:function(t){return e(Qe.saveDiagram(t))}}}))(Object(It.a)()(Ht))),Yt=a(202),Vt=a(191),Qt=a.n(Vt),Jt=a(192),Xt=a.n(Jt),Zt=a(193),$t=a.n(Zt),ea=a(398),ta=a(397),aa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.importDiagramDialogCancel()},e.handleSubmit=function(){var t=e.props,a=t.dropImportFileResults;(0,t.importDiagrams)(a.filter((function(e){return e.ok})).map((function(e){return e.diagram})))},e.handleOnDrop=function(t){var a=e.props,n=a.dropImportFile,r=a.currentFolderId;t.forEach((function(e){n(e,r)}))},e.handleDeleteChip=function(t){e.props.removeImportFile(t)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.showImportDiagramDialog,r=t.dropImportFileResults,i=t.standalone,c=t.classes,s=r.length>0,o=i?"Import New Diagram":"Import New Diagrams",l=i?"Drag and drop file here or click to browse for a file":"Drag and drop multiple files here or click to browse for a file";return Object(n.jsxs)(wt.a,{open:a,"aria-labelledby":"import-diagram-dialog",onEscapeKeyDown:this.handleCancel,children:[Object(n.jsx)(Et.a,{id:"import-diagram-dialog",children:o}),Object(n.jsx)(St.a,{children:Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Yt.a,{onDrop:this.handleOnDrop,className:c.dropzone,multiple:!i,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{align:"center",variant:"body2",children:l})}),Object(n.jsx)(Y.a,{item:!0,xs:12,align:"center",children:Object(n.jsx)(Qt.a,{})}),Object(n.jsx)(Y.a,{item:!0,xs:12,align:"center",children:r.map((function(t,a){var r=t.ok?Object(n.jsx)(ta.a,{children:Object(n.jsx)(Xt.a,{})}):Object(n.jsx)(ta.a,{children:Object(n.jsx)($t.a,{})});return Object(n.jsx)(ea.a,{label:t.name,className:c.chip,onDelete:function(){return e.handleDeleteChip(a)},avatar:r},a)}))})]})})})})}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",disabled:!s,children:"Import"})]})]})}}]),a}(r.Component),na=Object(g.a)((function(e){return{dropzone:{height:250,width:500,borderWidth:2,borderColor:"#999999",borderStyle:"dashed",borderRadius:5},list:{maxHeight:200,overflowY:"auto"},chip:{margin:5}}}))(Object(p.b)((function(e){return{showImportDiagramDialog:e.diagram.showImportDiagramDialog,dropImportFileResults:e.diagram.dropImportFileResults,currentFolderId:e.folder.currentFolderId}}),(function(e){return{importDiagramDialogCancel:function(){return e(Qe.importDiagramDialogCancel())},dropImportFile:function(t,a){return e(Qe.dropImportFile(t,a))},removeImportFile:function(t){return e(Qe.removeImportFile(t))}}}))(Object(It.a)()(aa))),ra=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.hideConvertToRelationalDialog()},e.handleCreate=function(){var t=e.props,a=t.diagram,n=t.name,r=t.convertToRelational,i=t.history;r(a.folderId,n,a.content,!1,i)},e.handleEdit=function(){var t=e.props,a=t.diagram,n=t.name,r=t.convertToRelational,i=t.history;r(a.folderId,n,a.content,!0,i)},e.handleNameChanged=function(t){var a=t.target.value;e.props.nameChanged(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showDialog,a=e.name,r=e.classes,i=e.autoFocusName;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:r.dialog,children:[Object(n.jsx)(Et.a,{id:"convert-diagram-dialog",children:"Convert to Relational Schema"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"The relational diagram will be created in the same folder as this ER diagram."}),Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"text",fullWidth:!0,inputProps:{ref:function(e){e&&i&&setTimeout((function(){e.focus(),e.select()}),0)}},value:a,onChange:this.handleNameChanged,className:r.input})})})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleCreate,color:"primary",children:"Create"}),Object(n.jsx)(f.a,{onClick:this.handleEdit,color:"primary",children:"Create & Edit"})]})]})}}]),a}(i.a.Component),ia=Object(g.a)((function(e){return{dialog:{},input:{width:500}}}))(Object(m.f)(Object(p.b)((function(e){var t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find((function(e){return e.id===t})),showDialog:e.convert.showDialog,autoFocusName:e.convert.autoFocusName,name:e.convert.name}}),(function(e){return{hideConvertToRelationalDialog:function(){return e(tt.hideConvertToRelationalDialog())},nameChanged:function(t){return e(tt.nameChanged(t))},convertToRelational:function(t,a,n,r,i){return e(tt.convertToRelational(t,a,n,r,i))}}}))(Object(It.a)()(ra)))),ca=a(194),sa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.hideConvertSqlDialog()},e.handleCopy=function(){e.props.setSqlCopied()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showConvertSqlDialog,a=e.sql,r=e.sqlCopied,i=e.classes,c=r?"Generate SQL - Copied":"Generate SQL";return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"convert-diagram-dialog",onEscapeKeyDown:this.handleCancel,className:i.dialog,children:[Object(n.jsx)(Et.a,{id:"convert-diagram-dialog",children:c}),Object(n.jsx)(St.a,{children:Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("pre",{align:"left",variant:"body2",children:a})})})}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Close (ESC)"}),Object(n.jsx)(ca.CopyToClipboard,{text:a,onCopy:this.handleCopy,children:Object(n.jsx)(f.a,{color:"primary",children:"Copy"})})]})]})}}]),a}(i.a.Component),oa=Object(g.a)((function(e){return{dialog:{},sql:{width:500,height:300}}}))(Object(p.b)((function(e){var t=e.convert.diagramId;return{diagram:e.diagram.diagrams.find((function(e){return e.id===t})),sql:e.convert.sql,showConvertSqlDialog:e.convert.showConvertSqlDialog,sqlCopied:e.convert.sqlCopied}}),(function(e){return{hideConvertSqlDialog:function(){return e(tt.hideConvertSqlDialog())},setSqlCopied:function(){return e(tt.setSqlCopied())}}}))(Object(It.a)()(sa))),la=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={foldersMeta:[],currendFolderId:0},e.handleSubmit=function(){e.props.onSubmit(e.state.currendFolderId),e.props.moveToFolderDialogCancel()},e.handleCancel=function(){e.props.moveToFolderDialogCancel()},e.expandFolder=function(t){var a=e.state.foldersMeta.map((function(e){return e.id===t?Object(h.a)(Object(h.a)({},e),{},{isOpen:!0}):e}));e.setState({foldersMeta:a})},e.collapseFolder=function(t){var a=e.state.foldersMeta.map((function(e){return e.id===t?Object(h.a)(Object(h.a)({},e),{},{isOpen:!1}):e}));e.setState({foldersMeta:a})},e.selectFolder=function(t){e.setState({currendFolderId:t})},e.makeFolderTree=function(e,t,a){if(0===e.length)return[];var n=e.map((function(e){var n=t.find((function(t){return t.id===e.id}));return Object(h.a)(Object(h.a)(Object(h.a)({},n),e),{},{isSelected:e.id===a})})),r=n.find((function(e){return"root"===e.folderType})),i=n.find((function(e){return"trash"===e.folderType}));r.depth=0,i.depth=0,i.children=[];return function e(t){var a=n.filter((function(e){return e.parentId===t.id}));a.forEach((function(a){a.depth=t.depth+1,e(a)})),t.children=a}(r),[r,i]},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){if(!1===e.showMoveToFolderDialog&&!0===this.props.showMoveToFolderDialog){var n=this.props.folders.map((function(e){return{id:e.id,isOpen:"root"===e.folderType}}));this.setState({foldersMeta:n,currendFolderId:0})}}},{key:"render",value:function(){var e=this.state,t=e.foldersMeta,a=e.currendFolderId,r=this.props,i=r.classes,c=r.folders,s=r.showMoveToFolderDialog,o=this.makeFolderTree(c,t,a);return Object(n.jsxs)(wt.a,{open:s,"aria-labelledby":"move-to-folder-dialog",onEscapeKeyDown:this.handleCancel,children:[Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Select a folder"}),Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:12,className:i.folderTree,children:Object(n.jsx)(ke,{folderTree:o,expandFolder:this.expandFolder,collapseFolder:this.collapseFolder,selectFolder:this.selectFolder})})})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",disabled:0===a,children:"Move"})]})]})}}]),a}(i.a.Component),da=Object(g.a)((function(e){return{dialog:{},folderTree:{width:420,height:280,overflowY:"scroll",overflowX:"hidden",border:"1px solid #efefef"}}}))(Object(m.f)(Object(p.b)((function(e){return{folders:e.folder.folders,showMoveToFolderDialog:e.diagram.showMoveToFolderDialog}}),(function(e){return{moveToFolderDialogCancel:function(){return e(Qe.moveToFolderDialogCancel())}}}))(Object(It.a)()(la)))),ua=400,ha=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,selectedIds:[]},e.handleClick=function(t){e.setState({anchorEl:t.currentTarget})},e.handleClose=function(){e.setState({anchorEl:null})},e.handleNewFolderClick=function(){e.props.createFolderDialogShow()},e.handleRenameFolderClick=function(){e.props.editFolderDialogShow(e.props.currentFolderId)},e.handleDeleteFolderClick=function(){e.props.deleteFolderDialogShow(e.props.currentFolderId)},e.handleNewDiagramClick=function(){e.props.createDiagramDialogShow()},e.handleImportDiagram=function(){e.props.importDiagramDialogShow()},e.handleOrganizeDiagram=function(){e.props.setDocumentsPageMode("select"),e.setState({selectedIds:[]})},e.handleMoveDone=function(){e.props.setDocumentsPageMode("list")},e.handleMoveTo=function(){e.props.moveToFolderDialogShow()},e.handleSelectDiagram=function(t){var a=Object(de.a)(e.state.selectedIds),n=a.indexOf(t);-1===n?a.push(t):a.splice(n,1),e.setState({selectedIds:a})},e.handleMoveToFolderSubmit=function(t){var a=e.state.selectedIds,n=e.props.diagrams.filter((function(e){return-1!==a.indexOf(e.id)})).map((function(e){return Object(h.a)(Object(h.a)({},e),{},{folderId:t})}));e.props.saveManyDiagrams(n)},e.selectFolder=function(t){e.handleMoveDone(),e.props.selectFolder(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/documents")}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.folderTree,r=e.expandFolder,i=e.collapseFolder,c=e.documentsPageMode,s=e.currentFolderType,o=this.state.selectedIds,l="trash"!==s&&"root"!==s,d="trash"===s;return Object(n.jsxs)("section",{className:t.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)("div",{className:t.contentArea,children:[Object(n.jsx)(kt,{}),Object(n.jsx)(Mt,{}),Object(n.jsx)(qt,{}),Object(n.jsx)(Kt,{}),Object(n.jsx)(Wt,{}),Object(n.jsx)(na,{importDiagrams:this.props.importDiagrams,standalone:!1}),Object(n.jsx)(ia,{}),Object(n.jsx)(oa,{}),Object(n.jsx)(da,{onSubmit:this.handleMoveToFolderSubmit}),Object(n.jsx)("div",{className:t.folderButtonsArea,children:Object(n.jsx)(Y.a,{container:!0,spacing:1,className:t.grid,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:t.buttonContainer,children:Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(f.a,{className:t.button,onClick:this.handleNewFolderClick,children:"New Folder..."}),Object(n.jsx)(f.a,{className:t.button,onClick:this.handleRenameFolderClick,disabled:!l,children:"Rename..."}),Object(n.jsx)(f.a,{className:t.button,onClick:this.handleDeleteFolderClick,disabled:!l,children:"Delete..."})]})})})})}),Object(n.jsx)("div",{className:t.folderArea,children:Object(n.jsx)(Y.a,{container:!0,spacing:1,className:t.grid,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(ke,{folderTree:a,expandFolder:r,collapseFolder:i,selectFolder:this.selectFolder})})})}),Object(n.jsx)("div",{className:t.documentButtonsArea,children:Object(n.jsx)(Y.a,{container:!0,spacing:1,className:t.grid,children:Object(n.jsxs)(Y.a,{item:!0,xs:12,children:["list"===c&&Object(n.jsx)("div",{className:t.buttonContainer,children:Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(f.a,{className:t.button,onClick:this.handleNewDiagramClick,disabled:d,children:"New Diagram..."}),Object(n.jsx)(f.a,{className:t.button,onClick:this.handleImportDiagram,disabled:d,children:"Import..."}),Object(n.jsx)(f.a,{className:t.button,onClick:this.handleOrganizeDiagram,children:"Organize..."})]})}),"select"===c&&Object(n.jsxs)("div",{className:t.buttonContainer,children:[Object(n.jsxs)(ut.a,{children:[Object(n.jsx)(f.a,{variant:"outlined",className:t.button,onClick:this.handleMoveDone,children:"Back"}),Object(n.jsx)(f.a,{variant:"outlined",className:t.button,onClick:this.handleMoveTo,disabled:0===o.length,children:"Move..."})]}),Object(n.jsx)(Q.a,{className:t.helperText,variant:"body1",children:"Select diagrams to move to another folder or to Trash."})]})]})})}),Object(n.jsx)("div",{className:t.documentsArea,children:Object(n.jsx)(Y.a,{container:!0,spacing:1,className:t.grid,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(dt,{mode:c,selectedIds:o,onSelectDiagram:this.handleSelectDiagram})})})})]})]})}}]),a}(r.Component),ma=Object(g.a)((function(e){return{root:{flexGrow:1},grid:{},button:{},buttonIcon:{marginRight:12},helperText:{display:"inline-flex",marginLeft:10},buttonContainer:{},section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#eeeeee"},contentArea:{height:"100%"},folderButtonsArea:{position:"fixed",top:75,left:5,width:ua,height:40},folderArea:{position:"fixed",top:120,left:5,width:ua,bottom:5,backgroundColor:"white",overflowY:"auto",overflowX:"hidden",border:"1px solid #e0e0e0"},documentButtonsArea:{position:"fixed",top:75,left:410,right:5,height:40},documentsArea:{position:"fixed",top:120,left:410,right:5,bottom:5,backgroundColor:"white",overflowY:"audo",overflowX:"hidden",border:"1px solid #e0e0e0"}}}))(Object(p.b)((function(e){var t=e.folder.folders.find((function(t){return t.id===e.folder.currentFolderId})),a=t?t.folderType:"";return{folderTree:nt(e),diagrams:e.diagram.diagrams,documentsPageMode:e.diagram.documentsPageMode,currentFolderId:e.folder.currentFolderId,currentFolderType:a}}),(function(e){return{createFolderDialogShow:function(){return e(gt.createFolderDialogShow())},editFolderDialogShow:function(t){return e(gt.editFolderDialogShow(t))},deleteFolderDialogShow:function(t){return e(gt.deleteFolderDialogShow(t))},expandFolder:function(t){return e(gt.expandFolder(t))},collapseFolder:function(t){return e(gt.collapseFolder(t))},selectFolder:function(t){return e(gt.selectFolder(t))},createDiagramDialogShow:function(){return e(Qe.createDiagramDialogShow())},importDiagramDialogShow:function(){return e(Qe.importDiagramDialogShow())},setCanvasSize:function(t,a){return e(Ct.setCanvasSize(t,a))},moveToFolderDialogShow:function(){return e(Qe.moveToFolderDialogShow())},saveManyDiagrams:function(t){return e(Qe.saveManyDiagrams(t))},setDocumentsPageMode:function(t){return e(Qe.setDocumentsPageMode(t))},importDiagrams:function(t){return e(Qe.importDiagrams(t))}}}))(ha)),pa=a(116),ba=a.n(pa),ja=a(117),ga=a.n(ja),fa=a(118),Oa=a.n(fa),xa=a(115),va=a.n(xa),ya=a(195),Ca=a.n(ya),wa=window.erd,Da={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]},Sa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={menuAnchor:null},e.handleUndo=function(){var t=e.props.getStage();e.props.clearContext(),t.undoManager.undo()},e.handleRedo=function(){var t=e.props.getStage();e.props.clearContext(),t.undoManager.redo()},e.handleDelete=function(){var t=e.props.getStage();t.deleteSelection(),t.draw()},e.changeMode=function(t){var a=e.props.getStage(),n=e.props.setMouseMode;a.undoManager.hasCurrentAction()&&a.undoManager.endAction(),a.mouseMode=t,n(t)},e.handleMenuClick=function(t){e.setState({menuAnchor:t})},e.handleMenuClose=function(){e.setState({menuAnchor:null})},e.handleExportImage=function(){var t=e.props,a=t.showExportImageDialog,n=t.createExportImageData,r=t.exportImageTransparent,i=t.exportImageScale,c=e.props.getStage(),s=new wa.DiagramArchive(c).toJson();a(s),n(s,r,i),e.handleMenuClose()},e.handleResize=function(){var t=e.props.getStage().getBounds(!1);e.props.showCanvasSizeDialog(t.right,t.bottom),e.setState({menuAnchor:null})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.menuAnchor,a=this.props,r=a.classes,i=a.diagramType,c=a.mouseMode,s=a.canUndo,o=a.canRedo,l=a.canDelete,d=a.isDirty,u=Da[i];return Object(n.jsxs)("div",{className:r.buttonBar,children:[Object(n.jsxs)(Ge.a,{id:"diagram-menu",open:Boolean(t),anchorEl:t,onClose:this.handleMenuClose,children:[Object(n.jsx)(qe.a,{onClick:this.handleExportImage,children:"Export Image ..."}),Object(n.jsx)(qe.a,{onClick:this.handleRename,children:"Rename ..."}),Object(n.jsx)(qe.a,{onClick:this.handleResize,children:"Canvas Size ..."})]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:function(t){return e.handleMenuClick(t.currentTarget)},children:[Object(n.jsx)(va.a,{})," Menu"]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.props.handleSave,disabled:!d,children:[Object(n.jsx)(Ca.a,{})," Save"]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleUndo,disabled:!s,children:[Object(n.jsx)(ba.a,{})," Undo"]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleRedo,disabled:!o,children:[Object(n.jsx)(ga.a,{})," Redo"]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleDelete,disabled:!l,children:[Object(n.jsx)(Oa.a,{})," Delete"]}),u.map((function(t){return Object(n.jsx)(f.a,{variant:"outlined",className:r.button,color:t.mouseMode===c?"primary":"default",onClick:function(){return e.changeMode(t.mouseMode)},children:t.name},t.mouseMode)}))]})}}]),a}(r.Component),Aa=Object(g.a)((function(e){return{button:{marginTop:e.spacing(1),marginBottom:0,marginLeft:e.spacing(1),marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}}}))(Object(m.f)(Object(p.b)((function(e,t){return{mouseMode:e.edit.mouseMode,editDiagram:Fe(e,t),canUndo:e.edit.canUndo,canRedo:e.edit.canRedo,canDelete:e.edit.canDelete,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale,isDirty:e.edit.isDirty}}),(function(e){return{clearContext:function(){return e(Ct.clearContext())},setMouseMode:function(t){return e(Ct.setMouseMode(t))},showCanvasSizeDialog:function(t,a){return e(Ct.showCanvasSizeDialog(t,a))},showExportImageDialog:function(t){return e(Ct.showExportImageDialog(t))},createExportImageData:function(t,a,n){return e(Ct.createExportImageData(t,a,n))}}}))(Sa))),Ea=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={width:e.props.canvasWidth,height:e.props.canvasHeight},e.handleCancel=function(){e.props.hideCanvasSizeDialog()},e.handleSubmit=function(){var t=e.state,a=t.width,n=t.height;e.props.setCanvasSize(a,n)},e.handleWidthChange=function(t){e.setState({width:t.target.value})},e.handleHeightChange=function(t){e.setState({height:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showCanvasSizeDialog,a=e.classes,r=Math.max(this.props.minCanvasWidth,200),i=parseInt(this.state.width,10),c=!0,s=" ";isNaN(i)?c=!1:i<r?(c=!1,s="Must be at least ".concat(r)):i>12e3&&(c=!1,s="Must be less than ".concat(12e3));var o=Math.max(this.props.minCanvasHeight,200),l=parseInt(this.state.height,10),d=!0,u=" ";return isNaN(l)?d=!1:l<o?(d=!1,u="Must be at least ".concat(o)):l>12e3&&(d=!1,u="Must be less than ".concat(12e3)),Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:a.dialog,children:[Object(n.jsx)(Et.a,{id:"canvas-size-dialog",children:"Canvas Size"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Canvas Size."}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(V.a,{id:"width",label:"Width",margin:"normal",autoComplete:"off",helperText:s,error:!c,value:this.state.width,onChange:this.handleWidthChange})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(V.a,{id:"height",label:"Height",margin:"normal",autoComplete:"off",helperText:u,error:!d,value:this.state.height,onChange:this.handleHeightChange})})]})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",disabled:!(c&&d),children:"Save"})]})]})}}]),a}(r.Component),Ia=Object(g.a)((function(e){return{dialog:{},input:{width:500}}}))(Object(p.b)((function(e){return{canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,minCanvasWidth:e.edit.minCanvasWidth,minCanvasHeight:e.edit.minCanvasHeight,showCanvasSizeDialog:e.edit.showCanvasSizeDialog}}),(function(e){return{createDiagramDialogCancel:function(){return e(Qe.createDiagramDialogCancel())},createDiagram:function(t){return e(Qe.createDiagram(t))},setCanvasSize:function(t,a){return e(Ct.setCanvasSize(t,a))},hideCanvasSizeDialog:function(){return e(Ct.hideCanvasSizeDialog())}}}))(Object(It.a)()(Ea))),Ta=window.saveAs,ka=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleCancel=function(){e.props.hideExportImageDialog()},e.handleSubmit=function(){Ta(e.props.exportImageBlob,"image.png");e.props.hideExportImageDialog()},e.handleChangeTransparent=function(){var t=e.props,a=t.updateExportImageOptions,n=t.createExportImageData,r=t.exportImageContent,i=t.exportImageTransparent,c=t.exportImageScale;a(!i,c),n(r,!i,c)},e.handleChangeScale=function(){var t=e.props,a=t.updateExportImageOptions,n=t.createExportImageData,r=t.exportImageContent,i=t.exportImageTransparent,c=1===t.exportImageScale?4:1;a(i,c),n(r,i,c)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.showExportImageDialog,a=e.exportImageDataUrl,r=e.exportImageTransparent,i=e.exportImageScale,c=e.classes;return Object(n.jsxs)(wt.a,{open:t,"aria-labelledby":"canvas-size-dialog",onEscapeKeyDown:this.handleCancel,className:c.dialog,children:[Object(n.jsx)(Et.a,{id:"canvas-size-dialog",children:"Export Image"}),Object(n.jsxs)(St.a,{children:[Object(n.jsx)(At.a,{children:"Preview"}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("div",{className:c.imageContainer,children:Object(n.jsx)("img",{src:a,alt:"diagram",className:c.image})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(re.a,{control:Object(n.jsx)(ie.a,{checked:r,onChange:this.handleChangeTransparent}),label:"Transparent Background"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(re.a,{control:Object(n.jsx)(ie.a,{checked:4===i,onChange:this.handleChangeScale}),label:"High Resolution (4x normal size)"})})]})]}),Object(n.jsxs)(Dt.a,{children:[Object(n.jsx)(f.a,{onClick:this.handleCancel,color:"primary",children:"Cancel (ESC)"}),Object(n.jsx)(f.a,{onClick:this.handleSubmit,color:"primary",children:"Save"})]})]})}}]),a}(r.Component),Na=Object(g.a)((function(e){return{dialog:{},input:{width:500},canvas:{display:"none"},imageContainer:{width:500,height:250,overflow:"scroll",backgroundColor:"#eee",backgroundSize:"40px 40px",backgroundPosition:"0 0, 20px 20px",backgroundImage:"linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0),linear-gradient(45deg,#e0e0e0 25%,transparent 25%,transparent 75%,#e0e0e0 75%,#e0e0e0)"},image:{}}}))(Object(p.b)((function(e){return{showExportImageDialog:e.edit.showExportImageDialog,exportImageDataUrl:e.edit.exportImageDataUrl,exportImageBlob:e.edit.exportImageBlob,exportImageContent:e.edit.exportImageContent,exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale}}),(function(e){return{hideExportImageDialog:function(){return e(Ct.hideExportImageDialog())},createExportImageData:function(t,a,n){return e(Ct.createExportImageData(t,a,n))},updateExportImageOptions:function(t,a){return e(Ct.updateExportImageOptions(t,a))}}}))(Object(It.a)()(ka))),Ma=window.erd,Ra=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{disjointed:e.props.contextDetails.isDisjointed?"d":"o"}),e.handleNameChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.name=a,n.draw(),e.setState({name:a})},e.handleTypeChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.type=a,n.draw(),e.setState({type:a})},e.handleIsDisjointedChange=function(t){var a="d"===t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.isDisjointed=a,n.draw(),e.setState({disjointed:a?"d":"o"})},e.handleTotalSpecializationChange=function(){var t=!e.state.isTotalSpecialization,a=e.props.getStage();a.undoManager.startAction(),a.findById(e.props.contextDetails.id).details.isTotalSpecialization=t,a.draw(),e.setState({isTotalSpecialization:t})},e.handleAddAttribute=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e.handleAddSubtype=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id),n=a.getNextAutomaticSubtypePosition(),r=t.factory.entity({x:n.x,y:n.y,name:"Subtype Entity",isSubtype:!0,supertypeEntityId:a.details.id});t.addItem(r),t.connect.items(r,a,{isSupertypeConnector:!0}),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.nameTextField;setTimeout((function(){e.focus(),e.select()}),0)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(n.jsxs)(Y.a,{container:!0,spacing:0,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:t.formControl,children:[Object(n.jsx)(_t.a,{children:"Entity Name"}),Object(n.jsx)(V.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(t){return e.nameTextField=t}},className:t.textField})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:t.formControl,children:[Object(n.jsx)(_t.a,{children:"Type"}),Object(n.jsxs)(Ft.a,{value:this.state.type,onChange:this.handleTypeChange,children:[Object(n.jsx)(re.a,{value:Ma.EntityType.Regular,control:Object(n.jsx)(Rt.a,{}),label:"Regular"}),Object(n.jsx)(re.a,{value:Ma.EntityType.Weak,control:Object(n.jsx)(Rt.a,{}),label:"Weak",disabled:this.state.isSubtype}),Object(n.jsx)(re.a,{value:Ma.EntityType.Associative,control:Object(n.jsx)(Rt.a,{}),label:"Associative",disabled:this.state.isSubtype}),Object(n.jsx)(re.a,{value:Ma.EntityType.Supertype,control:Object(n.jsx)(Rt.a,{}),label:"Supertype"})]})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddAttribute,children:"Add Attribute"})}),this.state.type===Ma.EntityType.Supertype&&Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:t.formControl,children:[Object(n.jsx)(_t.a,{children:"Supertype"}),Object(n.jsxs)(Ft.a,{value:this.state.disjointed,onChange:this.handleIsDisjointedChange,children:[Object(n.jsx)(re.a,{value:"d",control:Object(n.jsx)(Rt.a,{}),label:"Disjointed"}),Object(n.jsx)(re.a,{value:"o",control:Object(n.jsx)(Rt.a,{}),label:"Overlapping"})]})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(re.a,{label:"Total Specialization",control:Object(n.jsx)(ie.a,{checked:this.state.isTotalSpecialization,onChange:this.handleTotalSpecializationChange})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddSubtype,children:"Add Subtype Entity"})})]})]})}}]),a}(r.Component),Fa=Object(g.a)((function(e){return{formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Ra)),Pa=a(321),_a=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object(h.a)({},e.props.contextDetails),e.handleNameChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.name=a,n.draw(),e.setState({name:a})},e.handleFlagChange=function(t){return function(a){var n=e.props.getStage(),r=n.findById(e.props.contextDetails.id);n.undoManager.startAction(),"isComposite"===t&&r.removeAllChildAttributes(n);var i=!r.details[t];r.details[t]=i,n.draw(),e.setState({[t]:i})}},e.handleAddAttributeToEntity=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id).getOwner(),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e.handleAddComponentAttribute=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e.handleAddAttributeToComposite=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id).getOwner(),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e.handleAddAttributeToRelationship=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id).getOwner(),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.nameTextField;setTimeout((function(){e.focus(),e.select()}),0)}},{key:"render",value:function(){var e=this,t=this.props.getStage().findById(this.props.contextDetails.id).getOwner(),a=t&&"Entity"===t.getType(),r=t&&"Relationship"===t.getType(),i=this.state.isComposite,c=t&&"Attribute"===t.getType()&&t.details.isComposite,s=a&&"weak"===t.details.type,o=this.props.classes;return Object(n.jsxs)(Y.a,{container:!0,spacing:0,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:o.formControl,children:[Object(n.jsx)(_t.a,{children:"Attribute Name"}),Object(n.jsx)(V.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(t){return e.nameTextField=t}},className:o.textField})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Pt.a,{component:"fieldset",className:o.formControl,children:Object(n.jsxs)(Pa.a,{children:[Object(n.jsx)(re.a,{label:s?"Partially Unique":"Unique",control:Object(n.jsx)(ie.a,{checked:this.state.isUnique,onChange:this.handleFlagChange("isUnique")})}),Object(n.jsx)(re.a,{label:"Multivalued",control:Object(n.jsx)(ie.a,{checked:this.state.isMultivalued,onChange:this.handleFlagChange("isMultivalued")})}),Object(n.jsx)(re.a,{label:"Optional",control:Object(n.jsx)(ie.a,{checked:this.state.isOptional,onChange:this.handleFlagChange("isOptional")})}),Object(n.jsx)(re.a,{label:"Composite",control:Object(n.jsx)(ie.a,{checked:this.state.isComposite,onChange:this.handleFlagChange("isComposite")})}),Object(n.jsx)(re.a,{label:"Derived",control:Object(n.jsx)(ie.a,{checked:this.state.isDerived,onChange:this.handleFlagChange("isDerived")})})]})})}),a&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddAttributeToEntity,children:"Add Attribute to Entity"})}),r&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddAttributeToRelationship,children:"Add Attribute to Relationship"})}),i&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddComponentAttribute,children:"Add Component Attribute"})}),c&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddAttributeToComposite,children:"Add Attribute to Composite"})})]})}}]),a}(r.Component),La=Object(g.a)((function(e){return{formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(_a)),Ba=a(388),Ua=a(379),Ga=window.erd,qa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={name:e.props.contextDetails.name,isIdentifying:e.props.contextDetails.isIdentifying,slot0:e.props.contextDetails.slots[0],slot1:e.props.contextDetails.slots[1],showExact:!1},e.handleShowExactChange=function(t){var a=!e.state.showExact;e.setState({showExact:a})},e.handleNameChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.name=a,n.draw(),e.setState({name:a})},e.handleIdentifyingChange=function(t){var a=e.props.getStage();a.undoManager.startAction();var n=a.findById(e.props.contextDetails.id);n.details.isIdentifying=!n.details.isIdentifying,a.draw(),e.setState({isIdentifying:n.details.isIdentifying})},e.handleChangeEntity=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage();r.undoManager.startAction();var i=r.findById(e.props.contextDetails.id),c=e.state[n],s=a.target.value;if(s!==c.entityId){if(0!==c.entityId){var o=i.getSlotConnector(t);o&&o.removeFromStage(r)}if(s>0){var l=r.findById(s);r.connect.items(l,i,{slotIndex:t})}e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{entityId:s})}),r.invokeDirtyCallback(),r.draw()}}},e.handleMinimumChange=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage(),i=r.findById(e.props.contextDetails.id);r.undoManager.startAction();var c=e.state[n];i.details.slots[t].minimum=a.target.value,r.invokeDirtyCallback(),r.draw(),e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{minimum:a.target.value})})}},e.handleMaximumChange=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage(),i=r.findById(e.props.contextDetails.id);r.undoManager.startAction();var c=e.state[n];i.details.slots[t].maximum=a.target.value,r.invokeDirtyCallback(),r.draw(),e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{maximum:a.target.value})})}},e.handleRoleChange=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage(),i=r.findById(e.props.contextDetails.id);r.undoManager.startAction();var c=e.state[n];i.details.slots[t].role=a.target.value,r.invokeDirtyCallback(),r.draw(),e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{role:a.target.value})})}},e.handleParticipationChange=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage(),i=r.findById(e.props.contextDetails.id);r.undoManager.startAction();var c=e.state[n];i.details.slots[t].participation=a.target.value,r.invokeDirtyCallback(),r.draw(),e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{participation:a.target.value})})}},e.handleCardinalityChange=function(t){return function(a){var n="slot".concat(t),r=e.props.getStage(),i=r.findById(e.props.contextDetails.id);r.undoManager.startAction();var c=e.state[n];i.details.slots[t].cardinality=a.target.value,r.invokeDirtyCallback(),r.draw(),e.setState({[n]:Object(h.a)(Object(h.a)({},c),{},{cardinality:a.target.value})})}},e.handleAddAttribute=function(){var t=e.props.getStage();t.undoManager.hasCurrentAction()||t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id),n=a.getNextAutomaticPosition(),r=t.factory.attribute({x:n.x,y:n.y,name:"NewAttribute"});t.addItem(r),t.connect.items(r,a),t.selectItem(r),t.draw(),t.invokeDirtyCallback()},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.nameTextField;setTimeout((function(){e.focus(),e.select()}),0)}},{key:"render",value:function(){var e=this,t=this.props.getStage().findAllByType("Entity"),a=this.state,r=a.showExact,i=a.slot0,c=a.slot1,s=this.props.classes;return Object(n.jsxs)(Y.a,{container:!0,spacing:0,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:s.formControl,children:[Object(n.jsx)(_t.a,{children:"Relationship Name"}),Object(n.jsx)(V.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(t){return e.nameTextField=t}},className:s.textField})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Pt.a,{component:"fieldset",children:Object(n.jsx)(Pa.a,{children:Object(n.jsx)(re.a,{label:"Identifying",control:Object(n.jsx)(ie.a,{checked:this.state.isIdentifying,onChange:this.handleIdentifyingChange})})})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Entity One"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Pt.a,{className:s.formControl,children:Object(n.jsxs)(Ba.a,{value:i.entityId,onChange:this.handleChangeEntity(0),displayEmpty:!0,name:"entity1",children:[Object(n.jsx)(qe.a,{value:0,children:Object(n.jsx)("em",{children:"None"})}),t.map((function(e){return Object(n.jsx)(qe.a,{value:e.details.id,children:e.details.name},e.details.id)}))]})})}),!r&&Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(Pt.a,{component:"fieldset",children:Object(n.jsxs)(Ft.a,{value:i.participation,onChange:this.handleParticipationChange(0),children:[Object(n.jsx)(re.a,{value:Ga.ParticipationType.mandatory,control:Object(n.jsx)(Rt.a,{}),label:"Mandatory"}),Object(n.jsx)(re.a,{value:Ga.ParticipationType.optional,control:Object(n.jsx)(Rt.a,{}),label:"Optional"}),Object(n.jsx)(re.a,{value:Ga.ParticipationType.unspecified,control:Object(n.jsx)(Rt.a,{}),label:"Unspecified"})]})})}),!r&&Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(Pt.a,{component:"fieldset",children:Object(n.jsxs)(Ft.a,{value:i.cardinality,onChange:this.handleCardinalityChange(0),children:[Object(n.jsx)(re.a,{value:Ga.CardinalityType.one,control:Object(n.jsx)(Rt.a,{}),label:"One"}),Object(n.jsx)(re.a,{value:Ga.CardinalityType.many,control:Object(n.jsx)(Rt.a,{}),label:"Many"}),Object(n.jsx)(re.a,{value:Ga.CardinalityType.unspecified,control:Object(n.jsx)(Rt.a,{}),label:"Unspecified"})]})})}),r&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",children:[Object(n.jsx)(V.a,{id:"slot0min",label:"Minimum",margin:"normal",autoComplete:"off",value:i.minimum,onChange:this.handleMinimumChange(0)}),Object(n.jsx)(V.a,{id:"slot0max",label:"Maximum",margin:"normal",autoComplete:"off",value:i.maximum,onChange:this.handleMaximumChange(0)}),Object(n.jsx)(V.a,{id:"slot0role",label:"Role",margin:"normal",autoComplete:"off",value:i.role,onChange:this.handleRoleChange(0)})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Entity Two"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Pt.a,{className:s.formControl,children:Object(n.jsxs)(Ba.a,{value:c.entityId,onChange:this.handleChangeEntity(1),displayEmpty:!0,name:"entity1",children:[Object(n.jsx)(qe.a,{value:0,children:Object(n.jsx)("em",{children:"None"})}),t.map((function(e){return Object(n.jsx)(qe.a,{value:e.details.id,children:e.details.name},e.details.id)}))]})})}),!r&&Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(Pt.a,{component:"fieldset",children:Object(n.jsxs)(Ft.a,{value:c.participation,onChange:this.handleParticipationChange(1),children:[Object(n.jsx)(re.a,{value:Ga.ParticipationType.mandatory,control:Object(n.jsx)(Rt.a,{}),label:"Mandatory"}),Object(n.jsx)(re.a,{value:Ga.ParticipationType.optional,control:Object(n.jsx)(Rt.a,{}),label:"Optional"}),Object(n.jsx)(re.a,{value:Ga.ParticipationType.unspecified,control:Object(n.jsx)(Rt.a,{}),label:"Unspecified"})]})})}),!r&&Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(Pt.a,{component:"fieldset",children:Object(n.jsxs)(Ft.a,{value:c.cardinality,onChange:this.handleCardinalityChange(1),children:[Object(n.jsx)(re.a,{value:Ga.CardinalityType.one,control:Object(n.jsx)(Rt.a,{}),label:"One"}),Object(n.jsx)(re.a,{value:Ga.CardinalityType.many,control:Object(n.jsx)(Rt.a,{}),label:"Many"}),Object(n.jsx)(re.a,{value:Ga.CardinalityType.unspecified,control:Object(n.jsx)(Rt.a,{}),label:"Unspecified"})]})})}),r&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",children:[Object(n.jsx)(V.a,{id:"slot1min",label:"Minimum",margin:"normal",autoComplete:"off",value:c.minimum,onChange:this.handleMinimumChange(1)}),Object(n.jsx)(V.a,{id:"slot1max",label:"Maximum",margin:"normal",autoComplete:"off",value:c.maximum,onChange:this.handleMaximumChange(1)}),Object(n.jsx)(V.a,{id:"slot1role",label:"Role",margin:"normal",autoComplete:"off",value:c.role,onChange:this.handleRoleChange(1)})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(re.a,{control:Object(n.jsx)(Ua.a,{checked:this.state.showExact,onChange:this.handleShowExactChange,color:"primary"}),label:"Edit Exact Constraints"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{variant:"outlined",onClick:this.handleAddAttribute,children:"Add Attribute"})})]})}}]),a}(r.Component),za=Object(g.a)((function(e){return{formControl:{marginTop:0,width:"100%"},textField:{marginTop:0,width:"100%"}}}))(Object(m.f)(Object(p.b)((function(e,t){return{}}),(function(e){return{}}))(qa))),Wa=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object(h.a)({},e.props.contextDetails),e.handleTextChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.text=a,n.draw(),e.setState({text:a})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.textField;setTimeout((function(){e.focus(),e.select()}),0)}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(n.jsx)(Y.a,{container:!0,spacing:0,children:Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:t.formControl,children:[Object(n.jsx)(_t.a,{children:"Text Label"}),Object(n.jsx)(V.a,{id:"text",margin:"normal",autoComplete:"off",value:this.state.text,onChange:this.handleTextChange,multiline:!0,variant:"outlined",maxrows:10,inputProps:{ref:function(t){return e.textField=t}},className:t.textField})]})})})}}]),a}(r.Component),Ha=Object(g.a)((function(e){return{formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Wa)),Ka=a(382),Ya=a(384),Va=a(381),Qa=a(383),Ja=a(380);var Xa=Object(g.a)((function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},nameCellPrimaryKey:{textAlign:"left",paddingLeft:8,paddingRight:4,fontWeight:800,textDecoration:"underline"},nameP:{width:80},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4},dataTypeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeSizeCell:{textAlign:"left",paddingLeft:8,paddingRight:4},dataTypeP:{width:90},dataTypeSizeP:{width:60},fkNoteP:{margin:0,textAlign:"right"}}}))((function(e){var t=e.classes,a=e.handleClickRow,r=e.names,i=e.pkMember,c=(e.optional,e.soloUnique,e.dataType),s=e.fk,o=e.dataTypeSize;return Object(n.jsxs)(Ja.a,{hover:!0,onClick:a,children:[Object(n.jsx)(Va.a,{className:i?t.nameCellPrimaryKey:t.nameCell,children:r.map((function(e,a){return Object(n.jsx)("p",{className:t.nameP,children:e},a)}))}),!s&&Object(n.jsx)(Va.a,{className:t.dataTypeCell,children:Object(n.jsx)("p",{className:t.dataTypeP,children:c&&c.name})}),!s&&Object(n.jsx)(Va.a,{className:t.dataTypeSizeCell,children:Object(n.jsx)("p",{className:t.dataTypeSizeP,children:c&&o})}),s&&Object(n.jsx)(Va.a,{colSpan:2,children:Object(n.jsx)("p",{className:t.fkNoteP,children:"(Foreign Key)"})})]})})),Za=a(361),$a=[{id:"none",sql:"",name:"None",hasSize:!1,isCustom:!1},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0,isCustom:!1},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0,isCustom:!1},{id:"int",name:"INT",sql:"INT",hasSize:!1,isCustom:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0,isCustom:!1},{id:"date",name:"DATE",sql:"DATE",hasSize:!1,isCustom:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1,isCustom:!1},{id:"custom",name:"Custom",sql:"",hasSize:!0,isCustom:!0}];var en=Object(g.a)((function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:4,paddingRight:4},input:{width:"100%",fontSize:"0.8125rem"},dataTypeCell:{textAlign:"left",paddingLeft:4,paddingRight:4},dataTypeSelect:{width:90,fontSize:"0.8125rem"}}}))((function(e){var t=function(t){t&&e.focusAttributeName&&setTimeout((function(){t.focus(),t.select()}),0)},a=e.classes,r=e.names,i=e.fk,c=e.dataType,s=e.dataTypeSize,o=e.handleAttributeNameChange,l=e.handleDataTypeChange,d=e.handleDataTypeSizeChange;return Object(n.jsxs)(Ja.a,{selected:!0,hover:!0,children:[Object(n.jsx)(Va.a,{className:a.nameCell,children:r.map((function(e,r){return 0===r?Object(n.jsx)(Za.a,{value:e,className:a.input,inputProps:{ref:t},onChange:function(e){return o(e.target.value,r)}},r):Object(n.jsx)(Za.a,{value:e,className:a.input,onChange:function(e){return o(e.target.value,r)}},r)}))}),!i&&Object(n.jsx)(Va.a,{className:a.dataTypeCell,children:Object(n.jsx)(Pt.a,{children:Object(n.jsx)(Ba.a,{value:c&&c.id,onChange:l,displayEmpty:!0,name:"dataType",className:a.dataTypeSelect,children:$a.map((function(e){return Object(n.jsx)(qe.a,{value:e.id,children:e.name},e.id)}))})})}),!i&&Object(n.jsx)(Va.a,{className:a.cell,children:c&&c.hasSize&&Object(n.jsx)(Za.a,{value:s,className:a.input,onChange:d})}),i&&Object(n.jsx)(Va.a,{colSpan:2,children:Object(n.jsx)("p",{className:a.fkNoteP,children:"Foreign Key data types cannot be changed."})})]})}));var tn=Object(g.a)((function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},checkCell:{textAlign:"center",paddingLeft:4,paddingRight:4}}}))((function(e){var t=e.classes,a=e.attributes,r=e.selectedAttributeId,i=e.focusAttributeName,c=e.handleAttributeNameChange,s=e.handleClickRow,o=e.handleDataTypeChange,l=e.handleDataTypeSizeChange,d=e.dataTypes;return Object(n.jsxs)(Ka.a,{children:[Object(n.jsx)(Qa.a,{children:Object(n.jsxs)(Ja.a,{children:[Object(n.jsx)(Va.a,{className:t.nameCell,children:"Name"}),Object(n.jsx)(Va.a,{className:t.nameCell,children:"Data Type"}),Object(n.jsx)(Va.a,{className:t.checkCell,children:"Data Type Size"})]})}),Object(n.jsx)(Ya.a,{children:a.map((function(e){var t=function(e){var t=$a.find((function(t){return t.id===e}));return t||(t=$a.find((function(e){return"none"===e.id}))),t}(e.dataType);return r===e.id?Object(n.jsx)(en,{names:e.names,pkMember:e.pkMember,fk:e.fk,dataType:t,dataTypeSize:e.dataTypeSize,handleAttributeNameChange:c,handleDataTypeChange:o,handleDataTypeSizeChange:l,dataTypes:d,focusAttributeName:i},e.id):Object(n.jsx)(Xa,{names:e.names,pkMember:e.pkMember,fk:e.fk,dataType:t,dataTypeSize:e.dataTypeSize,handleClickRow:function(){return s(e.id)}},e.id)}))})]})}));var an=Object(g.a)((function(e){return{cell:{textAlign:"center",paddingLeft:0,paddingRight:0}}}))((function(e){var t=e.classes,a=e.attributes,r=e.checkedAttributeIds,i=e.handleAttributeChecked,c=e.disabledAttributes,s=[];return c&&(s=c.map((function(e){return e.id}))),Object(n.jsxs)(Ka.a,{children:[Object(n.jsx)(Qa.a,{children:Object(n.jsxs)(Ja.a,{children:[Object(n.jsx)(Va.a,{className:t.cell,children:"Key"}),Object(n.jsx)(Va.a,{className:t.cell,children:"Name"})]})}),Object(n.jsx)(Ya.a,{children:a.map((function(e){return Object(n.jsxs)(Ja.a,{children:[Object(n.jsx)(Va.a,{className:t.cell,children:Object(n.jsx)(ie.a,{disabled:s.includes(e.id),checked:r.includes(e.id),onChange:function(){return i(e.id)}})}),Object(n.jsx)(Va.a,{children:e.names.map((function(e,t){return Object(n.jsx)("p",{children:e},t)}))})]},e.id)}))})]})})),nn=a(196),rn=a.n(nn),cn=a(197),sn=a.n(cn);var on=Object(g.a)((function(e){return{nameCell:{textAlign:"left",paddingLeft:8,paddingRight:4},cell:{textAlign:"center",paddingLeft:0,paddingRight:0}}}))((function(e){for(var t=e.classes,a=e.attributes,r=e.handleAttributeMoveUp,i=e.handleAttributeMoveDown,c=[],s=0;s<a.length;++s)c.push(Object(h.a)(Object(h.a)({},a[s]),{},{prevId:s>0?a[s-1].id:null,nextId:s<a.length-1?a[s+1].id:null}));return Object(n.jsxs)(Ka.a,{children:[Object(n.jsx)(Qa.a,{children:Object(n.jsxs)(Ja.a,{children:[Object(n.jsx)(Va.a,{className:t.nameCell,children:"Name"}),Object(n.jsx)(Va.a,{className:t.cell})]})}),Object(n.jsx)(Ya.a,{children:c.map((function(e){return Object(n.jsxs)(Ja.a,{children:[Object(n.jsx)(Va.a,{className:t.nameCell,children:e.names.map((function(e,t){return Object(n.jsx)("p",{children:e},t)}))}),Object(n.jsxs)(Va.a,{className:t.cell,children:[Object(n.jsx)(W.a,{"aria-label":"Move Up",onClick:function(){return r(e.id,e.prevId)},disabled:!e.prevId,children:Object(n.jsx)(rn.a,{})}),Object(n.jsx)(W.a,{"aria-label":"Move Down",onClick:function(){return i(e.id,e.nextId)},disabled:!e.nextId,children:Object(n.jsx)(sn.a,{})})]})]},e.id)}))})]})})),ln="normal",dn="remove",un="groups",hn="reorder",mn="primaryKey",pn="unique",bn="optional",jn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state=Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{selectedAttributeId:0,mode:ln,checkedAttributeIds:[],currentGroupIndex:-1,menuAnchor:null}),e.handleNameChange=function(t){var a=t.target.value,n=e.props.getStage();n.undoManager.startAction(),n.findById(e.props.contextDetails.id).details.name=a,n.draw(),e.setState({name:a})},e.handleClickRow=function(t){e.setState({selectedAttributeId:t,focusAttributeName:!0})},e.handleAttributeNameChange=function(t,a){var n=e.props.getStage();n.undoManager.startAction();var r=n.findById(e.props.contextDetails.id);r.getAttributeById(e.state.selectedAttributeId).names[a]=t,n.draw(),e.setState(Object(h.a)(Object(h.a)({},r.details),{},{focusAttributeName:!1}))},e.handleAddAttribute=function(){var t=e.props.getStage();t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id).addAttribute({names:["New Column"]});t.draw(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{selectedAttributeId:a.id,focusAttributeName:!0}))},e.handleSetMode=function(t){e.setState({mode:t})},e.handleAttributeChecked=function(t){var a=Object(de.a)(e.state.checkedAttributeIds);a=a.includes(t)?a.filter((function(e){return e!==t})):[].concat(Object(de.a)(a),[t]),e.setState({checkedAttributeIds:a})},e.handleRemoveCheckedAttributes=function(){var t=e.props.getStage();t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id);e.state.checkedAttributeIds.forEach((function(e){var n=a.getAttributeById(e);a.removeAttribute(n,t)})),e.handleEndAttributeChecks(),t.draw()},e.handleEndAttributeChecks=function(){e.setState({mode:ln,checkedAttributeIds:[]})},e.handlePrimaryKeyMode=function(){var t=e.props.getStage().findById(e.props.contextDetails.id).getAttributesByOrder().filter((function(e){return e.pkMember})).map((function(e){return e.id}));e.setState({mode:mn,checkedAttributeIds:t})},e.handleSavePrimaryKeyChecks=function(){var t=e.props.getStage(),a=t.findById(e.props.contextDetails.id);a.removePkConnectors(t),a.getAttributesByOrder().map((function(e){return e.id})).forEach((function(t){var n=a.getAttributeById(t);n.pkMember=e.state.checkedAttributeIds.includes(n.id),n.pkMember&&(n.optional=!1)})),t.draw(),t.invokeDirtyCallback(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{mode:ln,checkedAttributeIds:[]}))},e.handleCancelPrimaryKeyChecks=function(){e.setState({mode:ln,checkedAttributeIds:[]})},e.handleOptionalMode=function(){var t=e.props.getStage().findById(e.props.contextDetails.id).getAttributesByOrder().filter((function(e){return e.optional})).map((function(e){return e.id}));e.setState({mode:bn,checkedAttributeIds:t})},e.handleSaveOptionalMode=function(){var t=e.props.getStage(),a=t.findById(e.props.contextDetails.id);a.getAttributesByOrder().map((function(e){return e.id})).forEach((function(t){var n=a.getAttributeById(t);n.optional=e.state.checkedAttributeIds.includes(n.id)})),t.draw(),t.invokeDirtyCallback(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{mode:ln,checkedAttributeIds:[]}))},e.handleCancelOptionalMode=function(){e.setState({mode:ln,checkedAttributeIds:[]})},e.handleUniqueMode=function(){var t=e.props.getStage().findById(e.props.contextDetails.id).getAttributesByOrder().filter((function(e){return e.soloUnique})).map((function(e){return e.id}));e.setState({mode:pn,checkedAttributeIds:t})},e.handleSaveUniqueMode=function(){var t=e.props.getStage(),a=t.findById(e.props.contextDetails.id);a.getAttributesByOrder().map((function(e){return e.id})).forEach((function(t){var n=a.getAttributeById(t);n.soloUnique=e.state.checkedAttributeIds.includes(n.id)})),t.draw(),t.invokeDirtyCallback(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{mode:ln,checkedAttributeIds:[]}))},e.handleCancelUniqueMode=function(){e.setState({mode:ln,checkedAttributeIds:[]})},e.handleEditGroup=function(t){var a=t>=0?e.state.uniqueGroups[t]:[];e.setState({currentGroupIndex:t,checkedAttributeIds:a}),e.handleMenuClose(),e.handleSetMode(un)},e.handleAddGroup=function(){var t=e.props.getStage();t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id);a.details.uniqueGroups.push([]),t.draw();var n=a.details.uniqueGroups.length-1;e.setState({currentGroupIndex:n,checkedAttributeIds:[],contextDetails:a.details}),e.handleMenuClose(),e.handleSetMode(un)},e.handleRemoveGroup=function(){var t=e.state.currentGroupIndex,a=e.props.getStage();a.undoManager.startAction();var n=a.findById(e.props.contextDetails.id);n.details.uniqueGroups.splice(t,1),a.draw();var r=(t=Math.min(t,n.details.uniqueGroups.lenght-1))>=0?e.state.uniqueGroups[t]:[];e.setState({currentGroupIndex:t,contextDetails:n.details,checkedAttributeIds:r}),e.handleSetMode(ln)},e.handleGroupAttributeChecked=function(t){var a=Object(de.a)(e.state.checkedAttributeIds);a=a.includes(t)?a.filter((function(e){return e!==t})):[].concat(Object(de.a)(a),[t]);var n=e.props.getStage();n.undoManager.startAction();var r=n.findById(e.props.contextDetails.id);r.details.uniqueGroups[e.state.currentGroupIndex]=a,n.draw(),e.setState({contextDetails:r.details,checkedAttributeIds:a})},e.handleMenuOpen=function(t){e.setState({menuAnchor:t})},e.handleMenuClose=function(){e.setState({menuAnchor:null})},e.handleDataTypeChange=function(t){var a=e.props.getStage();a.undoManager.startAction();var n=a.findById(e.props.contextDetails.id).getAttributeById(e.state.selectedAttributeId);n.dataType=t.target.value,n.dataTypeSize="",a.draw(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{focusAttributeName:!1}))},e.handleDataTypeSizeChange=function(t){var a=e.props.getStage();a.undoManager.startAction(),a.findById(e.props.contextDetails.id).getAttributeById(e.state.selectedAttributeId).dataTypeSize=t.target.value,a.draw(),e.setState(Object(h.a)(Object(h.a)({},e.props.contextDetails),{},{focusAttributeName:!1}))},e.handleEndAttributeReorder=function(){e.setState({mode:ln})},e.handleAttributeOrderSwap=function(t,a){var n=e.props.getStage();n.undoManager.startAction();var r=n.findById(e.props.contextDetails.id);r.details.sort="manual";var i=r.getAttributeById(t),c=r.getAttributeById(a);i.order===c.order&&r.getAttributesByOrder().forEach((function(e,t){e.order=t}));var s=i.order;i.order=c.order,c.order=s,r.updateAllAnchors(),n.draw(),e.setState({contextDetails:r.details})},e.handleAddRecursiveKey=function(){var t=e.props.getStage();t.undoManager.startAction();var a=t.findById(e.props.contextDetails.id);t.connect.items(a,a),a.updateAllAnchors(),t.draw(),e.setState({contextDetails:a.details})},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.nameTextField;setTimeout((function(){e.focus(),e.select()}),0)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.menuAnchor,i=a.uniqueGroups,c=a.selectedAttributeId,s=a.focusAttributeName,o=a.mode,l=a.checkedAttributeIds,d=a.currentGroupIndex,u=this.props.getStage().findById(this.props.contextDetails.id).getAttributesByOrder();return Object(n.jsxs)(Y.a,{container:!0,spacing:0,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Pt.a,{component:"fieldset",className:t.formControl,children:[Object(n.jsx)(_t.a,{children:"Table Name"}),Object(n.jsx)(V.a,{id:"name",margin:"normal",autoComplete:"off",value:this.state.name,onChange:this.handleNameChange,inputProps:{ref:function(t){return e.nameTextField=t}},className:t.textField})]})}),o===ln&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handlePrimaryKeyMode,children:"Primary Key"})}),Object(n.jsxs)(Y.a,{item:!0,xs:6,children:[Object(n.jsx)(f.a,{"aria-owns":r?"ugroups-menu":null,variant:"outlined",className:t.mainButton,onClick:function(t){return e.handleMenuOpen(t.currentTarget)},children:"(U) Groups ..."}),Object(n.jsxs)(Ge.a,{id:"ugroups-menu",open:Boolean(r),anchorEl:r,onClose:this.handleMenuClose,children:[Object(n.jsx)(qe.a,{onClick:this.handleAddGroup,children:"Add New Unique Group"}),i.map((function(t,a){return Object(n.jsxs)(qe.a,{value:a,onClick:function(){return e.handleEditGroup(a)},children:["Edit Unique Group ",a+1]},a)}))]})]}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleAddRecursiveKey,children:"Recursive Key"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:function(){return e.handleSetMode(hn)},children:"Reorder ..."})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleUniqueMode,children:"Unique ..."})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleOptionalMode,children:"Optional ..."})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Columns"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleAddAttribute,children:"Add"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:function(){return e.handleSetMode(dn)},children:"Remove ..."})})]})}),o===mn&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSavePrimaryKeyChecks,children:"Save"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelPrimaryKeyChecks,children:"Cancel"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Select columns for the Primary Key"})})]})}),o===dn&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleRemoveCheckedAttributes,children:"Remove"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeChecks,children:"Cancel"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Select columns to remove"})})]})}),o===pn&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSaveUniqueMode,children:"Save"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelUniqueMode,children:"Cancel"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Select Unique columns"})})]})}),o===bn&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleSaveOptionalMode,children:"Save"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleCancelOptionalMode,children:"Cancel"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(_t.a,{children:"Select Optional columns"})})]})}),o===hn&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Y.a,{container:!0,spacing:1,children:Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeReorder,children:"Done"})})})}),o===un&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)(_t.a,{children:["Edit Unique Group ",d+1]})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleRemoveGroup,children:"Remove"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)(f.a,{variant:"outlined",className:t.mainButton,onClick:this.handleEndAttributeChecks,children:"Done"})})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsxs)("div",{className:t.tableContainer,children:[o===ln&&Object(n.jsx)(tn,{attributes:u,selectedAttributeId:c,focusAttributeName:s,handleAttributeNameChange:this.handleAttributeNameChange,handleClickRow:this.handleClickRow,handleDataTypeChange:this.handleDataTypeChange,handleDataTypeSizeChange:this.handleDataTypeSizeChange}),o===dn&&Object(n.jsx)(an,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===mn&&Object(n.jsx)(an,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===pn&&Object(n.jsx)(an,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked}),o===bn&&Object(n.jsx)(an,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleAttributeChecked,disabledAttributes:u.filter((function(e){return e.pkMember}))}),o===un&&Object(n.jsx)(an,{attributes:u,checkedAttributeIds:l,handleAttributeChecked:this.handleGroupAttributeChecked}),o===hn&&Object(n.jsx)(on,{attributes:u,handleAttributeMoveUp:this.handleAttributeOrderSwap,handleAttributeMoveDown:this.handleAttributeOrderSwap})]})})]})}}]),a}(r.Component),gn=Object(g.a)((function(e){return{tableContainer:{overflow:"auto"},cell:{textAlign:"center",paddingLeft:0,paddingRight:0},input:{width:"100%"},formControl:{marginTop:16,width:"100%"},textField:{marginTop:0,width:"100%"},mainButton:{width:"100%"}}}))(Object(m.f)(Object(p.b)((function(e,t){return{}}),(function(e){return{}}))(jn))),fn=window.erd,On=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).tryLoadDiagram=function(){var t=e.props,a=t.editDiagram,n=t.setCanvasSize;if(!e.isReady&&a){e.isReady=!0;var r=new fn.DiagramArchive(e.stage).fromJson(a.content);"number"===typeof r.width&&"number"===typeof r.height&&n(r.width,r.height)}e.stage&&e.isReady&&setTimeout((function(){return e.stage.draw()}),0),e.setUndoRedo()},e.setUndoRedo=function(){e.stage&&e.props.setUndoRedo(e.stage.undoManager.canUndo(),e.stage.undoManager.canRedo())},e.activeItemChangedCallback=function(t){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),t?e.props.setContext(t.details,t.getType()):e.props.clearContext()},e.startMoveCallback=function(){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),e.stage.undoManager.startAction()},e.endMoveCallback=function(){e.stage.undoManager.endAction(),e.dirtyCallback()},e.connectModeEndCallback=function(){},e.dirtyCallback=function(){e.setUndoRedo(),e.props.setIsDirty(!0),e.autoSaveTimer&&(clearTimeout(e.autoSaveTimer),e.autoSaveTimer=null),e.autoSaveTimer=setTimeout(e.handleSave,8e3)},e.handleSave=function(){e.autoSaveTimer&&(clearTimeout(e.autoSaveTimer),e.autoSaveTimer=null);var t=e.props,a=t.saveEditDiagram,n=t.editDiagram,r=new fn.DiagramArchive(e.stage);a(Object(h.a)(Object(h.a)({},n),{},{content:r.toJson()}))},e.mouseModeResetCallback=function(t){e.props.setMouseMode(t)},e.selectedCountChange=function(){e.props.setCanDelete(e.stage.selectedCount())},e.getStage=function(){return e.stage},e.isReady=!1,e.autoSaveTimer=null,e.canvasElement=i.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/edit-diagram");var e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new fn.DiagramStage(this.canvasElement.current,e),this.tryLoadDiagram()}},{key:"componentDidUpdate",value:function(){this.tryLoadDiagram()}},{key:"componentWillUnmount",value:function(){this.props.clearContext(),this.autoSaveTimer&&this.handleSave()}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.editDiagram,r=e.canvasWidth,i=e.canvasHeight,c=e.contextType,s=e.contextDetails,o=e.mouseMode,l=a?a.diagramType:"none",d=[t.canvas];return"connect"===o&&d.push(t.canvasConnectMode),Object(n.jsxs)("section",{className:t.section,children:[Object(n.jsx)(K,{}),Object(n.jsx)(Ia,{}),Object(n.jsx)(Na,{getStage:this.getStage}),Object(n.jsx)(Aa,{diagramType:l,getStage:this.getStage,handleSave:this.handleSave}),Object(n.jsxs)("div",{className:t.workArea,children:[Object(n.jsx)("div",{className:t.canvasParent,children:Object(n.jsx)("canvas",{className:d.join(" "),width:r,height:i,ref:this.canvasElement})}),Object(n.jsxs)("div",{className:t.contextArea,children:["Entity"===c&&Object(n.jsx)(Fa,{contextDetails:s,getStage:this.getStage},s.id),"Attribute"===c&&Object(n.jsx)(La,{contextDetails:s,getStage:this.getStage},s.id),"Relationship"===c&&Object(n.jsx)(za,{contextDetails:s,getStage:this.getStage},s.id),"Label"===c&&Object(n.jsx)(Ha,{contextDetails:s,getStage:this.getStage},s.id),"Table"===c&&Object(n.jsx)(gn,{contextDetails:s,getStage:this.getStage},s.id),"Dimension"===c&&Object(n.jsx)(gn,{contextDetails:s,getStage:this.getStage},s.id),"Fact"===c&&Object(n.jsx)(gn,{contextDetails:s,getStage:this.getStage},s.id)]})]})]})}}]),a}(r.Component),xn=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},workArea:{display:"flex",overflow:"hidden"},contextArea:{width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{flex:1,overflow:"scroll",height:"100%"},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}}}))(Object(m.f)(Object(p.b)((function(e,t){return{editDiagram:Fe(e,t),canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight,contextDetails:e.edit.contextDetails,contextType:e.edit.contextType,mouseMode:e.edit.mouseMode}}),(function(e){return{setContext:function(t,a){return e(Ct.setContext(t,a))},setIsDirty:function(t){return e(Ct.setIsDirty(t))},clearContext:function(){return e(Ct.clearContext())},setMouseMode:function(t){return e(Ct.setMouseMode(t))},setUndoRedo:function(t,a){return e(Ct.setUndoRedo(t,a))},setCanDelete:function(t){return e(Ct.setCanDelete(t))},setCanvasSize:function(t,a){return e(Ct.setCanvasSize(t,a))},saveEditDiagram:function(t){return e(Ct.saveEditDiagram(t))}}}))(On))),vn=Object(y.createActions)({resetPasswordStart:["email"],resetPasswordStartSuccess:["email","duration"],resetPasswordStartFailure:null,resetPasswordComplete:["token","password","history"],resetPasswordCompleteSuccess:null,resetPasswordCompleteFailure:null}),yn=vn.Types,Cn=vn.Creators,wn=Object(y.createReducer)({email:null,error:null,forgotSuccess:!1},{[yn.RESET_PASSWORD_START]:function(e){return Object(h.a)(Object(h.a)({},e),{},{forgotSuccess:!1})},[yn.RESET_PASSWORD_START_SUCCESS]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{email:t.email,duration:t.duration,forgotSuccess:!0})},[yn.RESET_PASSWORD_START_FAILURE]:function(e,t){return Object(h.a)(Object(h.a)({},e),{},{error:t.error})},[yn.RESET_PASSWORD_COMPLETE]:function(e){return e},[yn.RESET_PASSWORD_COMPLETE_SUCCESS]:function(e){return e},[yn.RESET_PASSWORD_COMPLETE_FAILURE]:function(e){return e}}),Dn=yn,Sn=Cn,An=Object(Ne.a)([function(e,t){return t.history.location.pathname}],(function(e){var t=e.split("/");return 3===t.length&&"reset-password"===t[1]?t[2]:null})),En=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={password:"",confirmPassword:"",isPasswordDirty:!1,isConfirmPasswordDirty:!1},e.handlePasswordChange=function(t){e.setState({password:t.target.value,isPasswordDirty:!0})},e.handleConfirmPasswordChange=function(t){e.setState({confirmPassword:t.target.value,isConfirmPasswordDirty:!0})},e.handleSubmit=function(){e.props.resetPasswordComplete(e.props.token,e.state.password,e.props.history)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/reset-password")}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.password,r=t.confirmPassword,i=t.isPasswordDirty,c=t.isConfirmPasswordDirty,s=!a||a.length<8||a!==r,o=i&&a.length<8?"Password must be longer than 8 characters":"",l=c&&a!==r?"Passwords do not match":"";return Object(n.jsxs)("section",{className:e.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Reset Forgotten Password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"password",label:"Password",margin:"normal",className:e.textField,value:a,onChange:this.handlePasswordChange,helperText:o,type:"password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"confirmPassword",label:"Confirm Password",margin:"normal",className:e.textField,value:r,onChange:this.handleConfirmPasswordChange,helperText:l,type:"password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{className:e.submitButton,disabled:s,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Set Password"})})]})]})}}]),a}(r.Component),In=Object(g.a)((function(e){return{textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}}}))(Object(m.f)(Object(p.b)((function(e,t){return{duration:e.resetPassword.duration,token:An(e,t)}}),(function(e){return{resetPasswordComplete:function(t,a,n){return e(Sn.resetPasswordComplete(t,a,n))}}}))(En))),Tn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:""},e.catchReturn=function(t){"Enter"===t.key&&(t.preventDefault(),e.handleSubmit())},e.handleEmailChange=function(t){e.setState({email:t.target.value})},e.handleSubmit=function(){var t=e.state.email;t&&e.props.resetPasswordStart(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/forgot-password")}},{key:"render",value:function(){var e=this.state.email,t=this.props,a=t.classes,r=t.forgotSuccess,i=!e;return Object(n.jsxs)("section",{className:a.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,className:a.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Forgot Password"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"email",label:"Email",margin:"normal",className:a.textField,value:e,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})}),!r&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{className:a.submitButton,disabled:i,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Submit"})}),r&&Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"body1",children:"Check your email for the reset password link."})})]})]})}}]),a}(r.Component),kn=Object(g.a)((function(e){return{textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"}}}))(Object(m.f)(Object(p.b)((function(e){return{forgotSuccess:e.resetPassword.forgotSuccess}}),(function(e){return{resetPasswordStart:function(t){return e(Sn.resetPasswordStart(t))}}}))(Tn))),Nn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/faq")}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)("section",{className:e.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,md:3}),Object(n.jsxs)(Y.a,{item:!0,xs:12,md:6,className:e.words,children:[Object(n.jsx)(Q.a,{variant:"h5",className:e.title,children:"How do I create a unary relationship in an ER Diagram?"}),Object(n.jsx)(Q.a,{variant:"body1",children:"Create a unary relationship by clicking on the relationship icon (diamond), placing the relationship diamond on the drawing surface, naming the relationship, choosing the same entity for Entity One and Entity Two in the Edit relationship dialog box, and choosing appropriate cardinality constraints."}),Object(n.jsx)("img",{alt:"Set Entity One and Entity Two to the same entity for the relationship",src:"UnaryRelationship.png",className:e.img}),Object(n.jsx)(Q.a,{variant:"h5",className:e.title,children:"How do I make a ternary relationship in an ER Diagram?"}),Object(n.jsx)(Q.a,{variant:"body1",children:"In ERDPlus a ternary relationship is made using the associative entity feature. Here is an example of a ternary relationship."}),Object(n.jsx)("img",{alt:"An associative entity",src:"TernaryRelationship.png",className:e.img}),Object(n.jsx)(Q.a,{variant:"h5",className:e.title,children:"How do I make a foreign key in a Relational Schema?"}),Object(n.jsx)(Q.a,{variant:"body1",children:"To create a foreign key, click on the connect button. Then click on the table where the foreign key is sourced from and drag to the table that is getting the foreign key. This sequence of actions is illustrated with the following three figures"}),Object(n.jsx)("img",{alt:"Use connect mode",src:"RelationalSchemaFK1.png",className:e.img}),Object(n.jsx)("img",{alt:"Draw a connecting line from one table to the other",src:"RelationalSchemaFK2.png",className:e.img}),Object(n.jsx)("img",{alt:"The completed foreign key",src:"RelationalSchemaFK3.png",className:e.img})]}),Object(n.jsx)(Y.a,{item:!0,md:3})]})]})}}]),a}(r.Component),Mn=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},title:{marginTop:20,marginBottom:10},words:{margin:10},img:{boxShadow:"0 0 5px 0px",margin:5,textAlign:"center"},contentArea:{height:"100%"}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Nn)),Rn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/privacy-policy")}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)("section",{className:e.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,md:3}),Object(n.jsxs)(Y.a,{item:!0,xs:12,md:6,className:e.words,children:[Object(n.jsx)(Q.a,{variant:"h3",className:e.title,children:"Privacy Policy"}),Object(n.jsx)(Q.a,{variant:"body1",children:"This privacy policy discloses the privacy practices for https://erdplus.com. This privacy policy applies solely to information collected by this web site. It will notify you of the following:"}),Object(n.jsxs)("ol",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"What personally identifiable information is collected from you through the web site, how it is used and with whom it may be shared."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"What choices are available to you regarding the use of your data."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"The security procedures in place to protect the misuse of your information."})})]}),Object(n.jsx)(Q.a,{variant:"h6",children:"Information Collection, Use, and Sharing"}),Object(n.jsx)(Q.a,{variant:"body1",children:"We are the sole owners of the information collected on this site. We only have access to/collect information that you voluntarily give us via email or other direct contact from you. We will not sell or rent this information to anyone. We will use your information to respond to you, regarding the reason you contacted us. We will not share your information with any third party outside of our organization."}),Object(n.jsx)(Q.a,{variant:"h6",children:"Your Access to and Control Over Information"}),Object(n.jsx)(Q.a,{variant:"body1",children:"You can do the following at any time by contacting us via the email address on our website:"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"See what data we have about you, if any."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Change/correct any data we have about you."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Have us delete any data we have about you."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Express any concern you have about our use of your data."})})]}),Object(n.jsx)(Q.a,{variant:"h6",children:"Security"}),Object(n.jsx)(Q.a,{variant:"body1",children:"We take precautions to protect your information. When you submit sensitive information via the website, your information is protected both online and offline."}),Object(n.jsx)(Q.a,{variant:"body1",children:'Wherever we collect sensitive information (such as passwords), that information is encrypted and transmitted to us in a secure way. You can verify this by looking for a closed lock icon at the bottom of your web browser, or looking for "https" at the beginning of the address of the web page.'}),Object(n.jsx)(Q.a,{variant:"body1",children:"While we use encryption to protect sensitive information transmitted online, we also protect your information offline. Only employees who need the information to perform a specific job are granted access to personally identifiable information. The computers/servers in which we store personally identifiable information are kept in a secure environment."}),Object(n.jsx)(Q.a,{variant:"h6",children:"Registration"}),Object(n.jsx)(Q.a,{variant:"body1",children:"In order to use this website, a user may first optionally complete the registration form. Registration is required to use some features of the site. During registration a user is required to give certain information (such as name and email address). This information is used to contact you about the products/services on our site in which you have expressed interest."}),Object(n.jsx)(Q.a,{variant:"h6",children:"Cookies"}),Object(n.jsx)(Q.a,{variant:"body1",children:'We use "cookies" on this site. A cookie is a piece of data stored on a site visitor\'s hard drive to help us improve your access to our site and identify repeat visitors to our site. For instance, when we use a cookie to identify you, you would not have to log in a password more than once, thereby saving time while on our site. Cookies can also enable us to track and target the interests of our users to enhance the experience on our site. Usage of a cookie is in no way linked to any personally identifiable information on our site.'}),Object(n.jsx)(Q.a,{variant:"h6",children:"Updates"}),Object(n.jsx)(Q.a,{variant:"body1",children:"Our Privacy Policy may change from time to time and all updates will be posted on this page."}),Object(n.jsx)(Q.a,{variant:"body1",children:"If you feel that we are not abiding by this privacy policy, you should contact us immediately via email to info@erdplus.com."})]}),Object(n.jsx)(Y.a,{item:!0,md:3})]})]})}}]),a}(r.Component),Fn=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},title:{marginTop:20,marginBottom:10},words:{margin:10}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Rn)),Pn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/")}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)("section",{className:e.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:3}),Object(n.jsx)(Y.a,{item:!0,xs:6,style:{textAlign:"center"},children:Object(n.jsx)("img",{alt:"ERDPlus logo",src:"erdplus_logo_large.png"})}),Object(n.jsxs)(Y.a,{item:!0,xs:3,style:{verticalAlign:"bottom"},children:[Object(n.jsx)(Q.a,{variant:"h6",style:{marginTop:80},children:"Partners"}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{href:"https://www.luc.edu/quinlan/certificates/business-data-analytics/",children:Object(n.jsx)("img",{alt:"Loyola University Chicago - Business Data Analytics Certificate",src:"Logo1Loyola.png",className:e.partnerLoyolaImage})})}),Object(n.jsx)("p",{children:Object(n.jsx)("a",{href:"https://aptitive.com/",children:Object(n.jsx)("img",{alt:"Aptitive",src:"Logo2Aptitive.gif",className:e.parnterAptitiveImage})})})]}),Object(n.jsx)(Y.a,{item:!0,xs:12,style:{textAlign:"center"},children:Object(n.jsx)(Q.a,{variant:"h5",children:"A database modeling tool for creating Entity Relationship Diagrams, Relational Schemas, Star Schemas, and SQL DDL statements."})}),Object(n.jsx)(Y.a,{item:!0,xs:4,className:e.descriptionGridItem,children:Object(n.jsxs)(J.a,{className:e.descriptionPaper,elevation:2,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"Database Modeling"}),Object(n.jsx)(Q.a,{variant:"body1",children:"ERDPlus is a web-based database modeling tool that lets you quickly and easily create"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Entity Relationship Diagrams (ERDs)"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Relational Schemas (Relational Diagrams)"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Star Schemas (Dimensional Models)"})})]}),Object(n.jsx)(Q.a,{variant:"body1",children:"More features"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Automatically convert ER Diagrams into Relational Schemas"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Export SQL"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Export diagrams as a PNG"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Save diagrams safely on our server"})})]})]})}),Object(n.jsx)(Y.a,{item:!0,xs:4,className:e.descriptionGridItem,children:Object(n.jsxs)(J.a,{className:e.descriptionPaper,elevation:2,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"SQL DDL Statements"}),Object(n.jsx)(Q.a,{variant:"body1",children:"Export standard SQL"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Generate SQL from Relational Schemas and Star Schemas"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Select from common data types and data sizes"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Works with most contemporary RDBMS tools including Oracle, MySQL, Microsoft SQL Server, PostgresSQL, Teradata, IBM DB2, Microsoft Access, and others."})})]})]})}),Object(n.jsx)(Y.a,{item:!0,xs:4,children:Object(n.jsxs)(J.a,{className:e.descriptionPaper,elevation:2,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"Textbook"}),Object(n.jsx)(Q.a,{variant:"body1",children:"The Edition 2.0 of the textbook using ERDPlus is now available."}),Object(n.jsx)("a",{href:"https://www.prospectpressvt.com/textbooks/jukic-database-systems-introduction-to-databases-and-data-warehouses-2-0?hsLang=en",children:Object(n.jsx)("img",{alt:"Book cover",src:"dbtextbook_cover_2nd.webp",className:e.textbookImage})})]})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(J.a,{elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Entity Relationship Diagrams (ERDs)"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("img",{alt:"Sample diagram",src:"ERDSample.png"})}),Object(n.jsxs)(Y.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"ERDPlus enables drawing standard ERD components."}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Entities"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Attributes"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Relationships"})})]}),Object(n.jsx)(Q.a,{variant:"body1",children:"The notation supports drawing regular and weak entities, various types of attributes (regular, unique, multi-valued, derived, composite, and optional), and all possible cardinality constraints of relationships (mandatory-many, optional-many, mandatory-one and optional-one)."})]}),Object(n.jsx)(Y.a,{item:!0,xs:8,children:Object(n.jsx)("img",{alt:"Animation showing creating an ER diagram",src:"ERDAnimation.gif"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(J.a,{elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Relational Schemas"})}),Object(n.jsxs)(Y.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"ERDPlus enables drawing standard Relational Schema components"}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Tables (Relations)"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Table Columns (including Primary and Foreign Keys)"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Referential Integrity Constraint Lines (pointing from a Foreign Key to the Primary Key it refers to)"})})]}),Object(n.jsx)(Q.a,{variant:"body1",children:"The tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating relational schemas."})]}),Object(n.jsx)(Y.a,{item:!0,xs:8,children:Object(n.jsx)("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("img",{alt:"Sample relational schema diagram",src:"RelationalSchemaSample.png"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(J.a,{elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Automatically Convert ER Diagrams to Relational Schemas"})}),Object(n.jsxs)(Y.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"Convert ER Diagrams"}),Object(n.jsx)(Q.a,{variant:"body1",children:"ERDPlus enables automatic conversion of ER Diagrams to Relational Schemas with one click of a button. This vastly speeds up the process of creating a Relational Schema based on an ER Diagram."}),Object(n.jsx)(Q.a,{variant:"h6",children:"To use this feature"}),Object(n.jsxs)("ol",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Log into your account."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Click on the drop menu next to the name of any ER Diagram and chose \u201cConvert to Relational Schema\u201d option."})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"This will create a diagram containing the converted Relational Schema."})})]}),Object(n.jsx)(Q.a,{variant:"body1"})]}),Object(n.jsx)(Y.a,{item:!0,xs:8,children:Object(n.jsx)("img",{alt:"Short animation creating a relational schema",src:"RelationalSchemaAnimation.gif"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("img",{alt:"An ER diagram that can be converted into a relational schema",src:"ERDSample.png"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("img",{alt:"Sample relational schema automatically created from the ER diagram",src:"RelationalSchemaSample.png"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(J.a,{elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Star Schemas"})}),Object(n.jsxs)(Y.a,{item:!0,xs:4,className:e.textAlignLeft,children:[Object(n.jsx)(Q.a,{variant:"h6",children:"ERDPlus enables drawing Star Schema components."}),Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Fact Tables (Facts)"})}),Object(n.jsx)("li",{children:Object(n.jsx)(Q.a,{variant:"body1",children:"Dimension Tables (Dimensions)"})})]}),Object(n.jsx)(Q.a,{variant:"body1",children:"The notation distinguishes fact tables from dimension tables by using a thicker frame around fact tables. This makes star schema diagrams easier to interpret. As with relational schemas, the tool supports quick creation of foreign keys and referential integrity lines by simple click-point-connect actions. This simplifies and quickens the process of creating star schemas."})]}),Object(n.jsx)(Y.a,{item:!0,xs:8,children:Object(n.jsx)("img",{alt:"Short animation creating a star schema",src:"StarSchemaAnimation.gif"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)("img",{alt:"An example star schema",src:"StarSchemaSample.png"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(J.a,{elevation:2,children:Object(n.jsxs)(Y.a,{container:!0,className:e.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Export SQL"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)("img",{alt:"An example relational schema that can be converted to SQL",src:"RelationalSchemaForSql.png"})}),Object(n.jsx)(Y.a,{item:!0,xs:6,children:Object(n.jsx)("pre",{className:e.sqlBlock,children:"CREATE TABLE PRODUCT\n(\n  ProductID INT NOT NULL,\n  ProductName VARCHAR(64) NOT NULL,\n  ProductPrice DECIMAL(4, 2) NOT NULL,\n  PRIMARY KEY (ProductID)\n);\n\nCREATE TABLE CUSTOMER\n(\n  CustomerID INT NOT NULL,\n  CustomerName VARCHAR(40) NOT NULL,\n  CustomerZip VARCHAR(10) NOT NULL,\n  PRIMARY KEY (CustomerID)\n);\n\nCREATE TABLE SALESTRANSACTION\n(\n  TID INT NOT NULL,\n  Tdate DATE NOT NULL,\n  CustomerID INTEGER NOT NULL,\n  PRIMARY KEY (TID),\n  FOREIGN KEY (CustomerID) REFERENCES CUSTOMER(CustomerID)\n);\n\nCREATE TABLE SOLDVIA\n(\n  ProductID INT NOT NULL,\n  TID INT NOT NULL,\n  PRIMARY KEY (ProductID, TID),\n  FOREIGN KEY (ProductID) REFERENCES PRODUCT(ProductID),\n  FOREIGN KEY (TID) REFERENCES SALESTRANSACTION(TID)\n);"})})]})})}),Object(n.jsx)(Y.a,{item:!0,xs:4,children:"Copyright \xa9 ERDPlus 2015-2021"}),Object(n.jsx)(Y.a,{item:!0,xs:4,children:Object(n.jsx)(v.a,{to:"/privacy-policy",children:"Privacy Policy"})}),Object(n.jsx)(Y.a,{item:!0,xs:4,children:Object(n.jsx)(v.a,{to:"mailto:info@erdplus.com",children:"info@erdplus.com"})}),Object(n.jsx)(Y.a,{item:!0,xs:4,className:e.version,children:Object(n.jsxs)(Q.a,{variant:"caption",children:["production"," / ","2021-09-17T19:45:01+00:00"," / ","d0ecd9a4d295b7fdb35ab046b837da482ec7e6e3"]})})]})]})}}]),a}(r.Component),_n=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},contentArea:{height:"100%"},grid:{padding:e.spacing(3),textAlign:"center",marginTop:e.spacing(1),marginBottom:e.spacing(1)},descriptionGridItem:{},descriptionPaper:{textAlign:"left",padding:20,height:440},textbookImage:{width:200,textAlign:"center",margin:20,border:"1px solid #aaa"},partnerLoyolaImage:{width:175},parnterAptitiveImage:{width:175,border:"1px solid #ddd"},sqlBlock:{textAlign:"left"},textAlignLeft:{textAlign:"left"},footerGrid:{backgroundColor:"#eeeeee",textAlign:"center",paddingTop:40,paddingBottom:40},version:{textAlign:"center"},upgrade:{border:"5px solid #ff3333"}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Pn)),Ln=window.gapi,Bn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:""},e.componentDidMount=function(){ne.a.pageview("/login"),Ln.load("auth2",(function(){Ln.auth2.init({client_id:"935519046542-t7la3ci754e31p6lot2mo9r36mq5d2d4.apps.googleusercontent.com"}).attachClickHandler("google-login",{},(function(t){var a=t.getAuthResponse().id_token;e.props.googleLogin(a,e.props.history)}),(function(e){console.log(e)}))}))},e.handleEmailChange=function(t){e.setState({email:t.target.value})},e.handlePasswordChange=function(t){e.setState({password:t.target.value})},e.handleSubmit=function(){var t=e.state,a=t.email,n=t.password;e.props.login(a,n,e.props.history)},e.catchReturn=function(t){if("Enter"===t.key){t.preventDefault();var a=e.state,n=a.email,r=a.password;n&&r&&e.handleSubmit()}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,r=this.props.classes,i=!t||!a;return Object(n.jsxs)("section",{className:r.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,className:r.grid,spacing:3,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Login"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"email",label:"Email",margin:"normal",className:r.textField,value:t,onChange:this.handleEmailChange,onKeyPress:this.catchReturn})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(V.a,{id:"password",label:"Password",margin:"normal",className:r.textField,value:a,onChange:this.handlePasswordChange,type:"password",onKeyPress:this.catchReturn})}),Object(n.jsx)(Y.a,{item:!0,xs:12,children:Object(n.jsx)(f.a,{className:r.loginButton,disabled:i,variant:"outlined",color:"primary",onClick:this.handleSubmit,children:"Login"})}),Object(n.jsxs)(Y.a,{item:!0,xs:12,children:[Object(n.jsx)(f.a,{component:v.a,to:"/create-account",children:"Create Account"}),Object(n.jsx)(f.a,{component:v.a,to:"/forgot-password",children:"Forgot Password"})]}),Object(n.jsxs)(Y.a,{item:!0,xs:12,children:[Object(n.jsx)("p",{children:"New users are encouraged to create an account with an email and password."}),Object(n.jsxs)(f.a,{id:"google-login",variant:"outlined",className:r.loginButton,children:[Object(n.jsx)("img",{alt:"Google Logo",src:"g-logo.png",className:r.socialButtonImage}),"Signin with Google"]})]})]})]})}}]),a}(r.Component),Un=Object(g.a)((function(e){return{textField:{margin:e.spacing(1),width:300},submitButton:{margin:e.spacing(1),width:200},section:{height:"100%",display:"flex",flexFlow:"column"},grid:{paddingTop:e.spacing(3),textAlign:"center"},loginButton:{margin:e.spacing(1),width:250},socialButtonImage:{height:24,marginRight:5,backgroundColor:"#ffffff"}}}))(Object(m.f)(Object(p.b)((function(e){return{}}),(function(e){return{login:function(t,a,n){return e(E.login(t,a,n))},googleLogin:function(t,a){return e(E.googleLogin(t,a))}}}))(Bn))),Gn=window.erd,qn={none:[],er:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Entity",mouseMode:"entity"},{name:"Attribute",mouseMode:"attribute"},{name:"Relationship",mouseMode:"relationship"},{name:"Label",mouseMode:"label"}],relational:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Table",mouseMode:"table"},{name:"Label",mouseMode:"label"}],star:[{name:"Select",mouseMode:"select"},{name:"Connect",mouseMode:"connect"},{name:"Fact",mouseMode:"fact"},{name:"Dimension",mouseMode:"dimension"},{name:"Label",mouseMode:"label"}]},zn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={menuAnchor:null},e.handleSave=function(){var t=e.props,a=t.saveDiagram,n=t.editDiagram,r=e.props.getStage(),i=new Gn.DiagramArchive(r);a(Object(h.a)(Object(h.a)({},n),{},{content:i.toJson()})),e.handleMenuClose()},e.handleImport=function(){e.props.importDiagramDialogShow(),e.handleMenuClose()},e.handleUndo=function(){var t=e.props.getStage();e.props.clearContext(),t.undoManager.undo()},e.handleRedo=function(){var t=e.props.getStage();e.props.clearContext(),t.undoManager.redo()},e.handleDelete=function(){var t=e.props.getStage();t.deleteSelection(),t.draw()},e.changeMode=function(t){var a=e.props.getStage(),n=e.props.setMouseMode;a.undoManager.hasCurrentAction()&&a.undoManager.endAction(),a.mouseMode=t,n(t)},e.handleMenuClick=function(t){e.setState({menuAnchor:t})},e.handleMenuClose=function(){e.setState({menuAnchor:null})},e.handleExportImage=function(){var t=e.props,a=t.showExportImageDialog,n=t.createExportImageData,r=t.exportImageTransparent,i=t.exportImageScale,c=e.props.getStage(),s=new Gn.DiagramArchive(c).toJson();a(s),n(s,r,i),e.handleMenuClose()},e.handleResize=function(){var t=e.props.getStage().getBounds(!1);e.props.showCanvasSizeDialog(t.right,t.bottom),e.setState({menuAnchor:null})},e.newERDiagram=function(){e.handleMenuClose(),e.props.newERDiagram()},e.newRelationalSchema=function(){e.handleMenuClose(),e.props.newRelationalSchema()},e.newStarSchema=function(){e.handleMenuClose(),e.props.newStarSchema()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.state.menuAnchor,a=this.props,r=a.classes,i=a.diagramType,c=a.mouseMode,s=a.canUndo,o=a.canRedo,l=a.canDelete,d=qn[i];return Object(n.jsxs)("div",{className:r.buttonBar,children:[Object(n.jsxs)(Ge.a,{id:"diagram-menu",open:Boolean(t),anchorEl:t,onClose:this.handleMenuClose,children:[Object(n.jsx)(qe.a,{onClick:this.newERDiagram,children:"New ER Diagram"}),Object(n.jsx)(qe.a,{onClick:this.newRelationalSchema,children:"New Relational Schema"}),Object(n.jsx)(qe.a,{onClick:this.newStarSchema,children:"New Star Schema"}),Object(n.jsx)("hr",{}),Object(n.jsx)(qe.a,{onClick:this.handleSave,children:"Export ..."}),Object(n.jsx)(qe.a,{onClick:this.handleImport,children:"Import ..."}),Object(n.jsx)("hr",{}),Object(n.jsx)(qe.a,{onClick:this.handleExportImage,children:"Export Image ..."}),Object(n.jsx)(qe.a,{onClick:this.handleResize,children:"Canvas Size ..."})]}),Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:function(t){return e.handleMenuClick(t.currentTarget)},children:[Object(n.jsx)(va.a,{})," Menu"]}),"none"!==i&&Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleUndo,disabled:!s,children:[Object(n.jsx)(ba.a,{})," Undo"]}),"none"!==i&&Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleRedo,disabled:!o,children:[Object(n.jsx)(ga.a,{})," Redo"]}),"none"!==i&&Object(n.jsxs)(f.a,{variant:"outlined",className:r.button,onClick:this.handleDelete,disabled:!l,children:[Object(n.jsx)(Oa.a,{})," Delete"]}),d.map((function(t){return Object(n.jsx)(f.a,{variant:"outlined",className:r.button,color:t.mouseMode===c?"primary":"default",onClick:function(){return e.changeMode(t.mouseMode)},children:t.name},t.mouseMode)}))]})}}]),a}(r.Component),Wn=Object(g.a)((function(e){return{button:{marginTop:e.spacing(1),marginBottom:0,marginLeft:e.spacing(1),marginRight:0},buttonBar:{background:"#eeeeee",paddingBottom:10,zIndex:1e3}}}))(Object(m.f)(Object(p.b)((function(e,t){return{exportImageTransparent:e.edit.exportImageTransparent,exportImageScale:e.edit.exportImageScale}}),(function(e){return{showExportImageDialog:function(t){return e(Ct.showExportImageDialog(t))},createExportImageData:function(t,a,n){return e(Ct.createExportImageData(t,a,n))},importDiagramDialogShow:function(){return e(Qe.importDiagramDialogShow())}}}))(zn))),Hn=window.erd,Kn=window.saveAs,Yn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={diagramType:"er",contextType:"",contextDetails:null,mouseMode:"none",editDiagram:null,canUndo:!1,canRedo:!1,canDelete:!1,exportImageTransparent:!1,exportImageScale:null},e.activeItemChangedCallback=function(t){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),t?e.setState({contextType:t.getType(),contextDetails:t.details}):e.setState({contextType:"",contextDetails:null})},e.clearContext=function(){e.setState({contextType:"",contextDetails:null})},e.startMoveCallback=function(){e.stage.undoManager.hasCurrentAction()&&e.stage.undoManager.endAction(),e.stage.undoManager.startAction()},e.endMoveCallback=function(){e.stage.undoManager.endAction(),e.dirtyCallback()},e.connectModeEndCallback=function(){},e.dirtyCallback=function(){e.setState({canUndo:e.stage.undoManager.canUndo(),canRedo:e.stage.undoManager.canRedo()})},e.mouseModeResetCallback=function(t){e.setState({mouseMode:t})},e.selectedCountChange=function(){e.setState({canDelete:e.stage.selectedCount()>0})},e.newERDiagram=function(){e.newDiagram("er")},e.newRelationalSchema=function(){e.newDiagram("relational")},e.newStarSchema=function(){e.newDiagram("star")},e.newDiagram=function(t){var a=JSON.stringify({version:2,www:"erdplus.com",shapes:[],connectors:[],width:2e3,height:1e3}),n=new Hn.DiagramArchive(e.stage).fromJson(a);e.setState({diagramType:t}),e.props.setCanvasSize(n.width,n.height)},e.getStage=function(){return e.stage},e.setMouseMode=function(t){e.setState({mouseMode:t})},e.saveDiagram=function(e){var t=new Blob([e.content],{type:"text/plain;charset=utf-8"});Kn(t,"".concat(e.name,".erdplus"))},e.importDiagrams=function(t){if(1===t.length){var a=t[0],n=new Hn.DiagramArchive(e.stage).fromJson(a.content);e.setState({diagramType:a.diagramType}),e.props.setCanvasSize(n.width,n.height),e.props.importDiagramDialogCancel(),setTimeout((function(){return e.stage.draw()}),0)}},e.showCanvasSizeDialog=function(t,a){e.props.showCanvasSizeDialog(t,a)},e.isReady=!1,e.canvasElement=i.a.createRef(),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){ne.a.pageview("/standalone");var e={activeItemChangedCallback:this.activeItemChangedCallback,startMoveCallback:this.startMoveCallback,endMoveCallback:this.endMoveCallback,connectModeEndCallback:this.connectModeEndCallback,dirtyCallback:this.dirtyCallback,mouseModeResetCallback:this.mouseModeResetCallback,selectedCountChange:this.selectedCountChange};this.stage=new Hn.DiagramStage(this.canvasElement.current,e)}},{key:"render",value:function(){var e=this.state,t=e.diagramType,a=e.contextType,r=e.contextDetails,i=e.mouseMode,c=e.editDiagram,s=e.canUndo,o=e.canRedo,l=e.canDelete,d=e.exportImageTransparent,u=e.exportImageScale,h=this.props,m=h.classes,p=h.canvasWidth,b=h.canvasHeight,j=[m.canvas];return"connect"===i&&j.push(m.canvasConnectMode),Object(n.jsxs)("section",{className:m.section,children:[Object(n.jsx)(K,{}),Object(n.jsx)(Ia,{}),Object(n.jsx)(Na,{getStage:this.getStage}),Object(n.jsx)(na,{importDiagrams:this.importDiagrams,standalone:!0}),Object(n.jsx)(Wn,{diagramType:t,getStage:this.getStage,setMouseMode:this.setMouseMode,saveDiagram:this.saveDiagram,showCanvasSizeDialog:this.showCanvasSizeDialog,mouseMode:i,editDiagram:c,canUndo:s,canRedo:o,canDelete:l,exportImageTransparent:d,exportImageScale:u,newERDiagram:this.newERDiagram,newRelationalSchema:this.newRelationalSchema,newStarSchema:this.newStarSchema,clearContext:this.clearContext}),Object(n.jsxs)("div",{className:m.workArea,children:[Object(n.jsx)("div",{className:m.canvasParent,children:Object(n.jsx)("canvas",{className:j.join(" "),width:p,height:b,ref:this.canvasElement})}),Object(n.jsxs)("div",{className:m.contextArea,children:["Entity"===a&&Object(n.jsx)(Fa,{contextDetails:r,getStage:this.getStage},r.id),"Attribute"===a&&Object(n.jsx)(La,{contextDetails:r,getStage:this.getStage},r.id),"Relationship"===a&&Object(n.jsx)(za,{contextDetails:r,getStage:this.getStage},r.id),"Label"===a&&Object(n.jsx)(Ha,{contextDetails:r,getStage:this.getStage},r.id),"Table"===a&&Object(n.jsx)(gn,{contextDetails:r,getStage:this.getStage},r.id),"Dimension"===a&&Object(n.jsx)(gn,{contextDetails:r,getStage:this.getStage},r.id),"Fact"===a&&Object(n.jsx)(gn,{contextDetails:r,getStage:this.getStage},r.id)]})]})]})}}]),a}(r.Component),Vn=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},workArea:{display:"flex",overflow:"hidden"},contextArea:{width:320,height:"100%",overflow:"auto",background:"#eeeeee",padding:5},canvasParent:{flex:1,overflow:"scroll",height:"100%"},canvas:{border:"1px solid #aaa",margin:0,backgroundColor:e.palette.background.paper},canvasConnectMode:{cursor:"crosshair"}}}))(Object(m.f)(Object(p.b)((function(e,t){return{canvasWidth:e.edit.canvasWidth,canvasHeight:e.edit.canvasHeight}}),(function(e){return{setCanvasSize:function(t,a){return e(Ct.setCanvasSize(t,a))},showCanvasSizeDialog:function(t,a){return e(Ct.showCanvasSizeDialog(t,a))},importDiagramDialogCancel:function(){return e(Qe.importDiagramDialogCancel())}}}))(Yn))),Qn=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)("section",{className:e.section,children:[Object(n.jsx)(K,{}),Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,className:e.center,children:Object(n.jsx)(Q.a,{variant:"h3",children:"404"})}),Object(n.jsx)(Y.a,{item:!0,xs:12,className:e.center,children:Object(n.jsx)(Q.a,{variant:"h3",children:"Page Not Found"})})]})]})}}]),a}(r.Component),Jn=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column"},center:{textAlign:"center",marginTop:25}}}))(Object(p.b)((function(e){return{}}),(function(e){return{}}))(Qn)),Xn="#4C3310",Zn={default:{zIndex:{appBar:1250},typography:{}},amber:{palette:{primary:{main:"#0080FF"},secondary:{main:"#FF5C93"},warning:{main:"#FFC260"},success:{main:"#3CD4A0"},info:{main:"#9013FE"},text:{primary:Xn,secondary:Xn,hint:Xn}},zIndex:{appBar:1250},typography:{}}},$n=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsx)("section",{className:e.section,children:Object(n.jsxs)(Y.a,{container:!0,spacing:1,children:[Object(n.jsx)(Y.a,{item:!0,xs:12,className:e.center,children:Object(n.jsx)(F.a,{className:e.spinner})}),Object(n.jsx)(Y.a,{item:!0,xs:12,className:e.center,children:Object(n.jsx)(Q.a,{variant:"h4",children:"Loading"})})]})})}}]),a}(r.Component),er=Object(g.a)((function(e){return{section:{height:"100%",display:"flex",flexFlow:"column",backgroundColor:"#d0d0d0"},"@keyframes rotator":{from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}},spinner:{animation:"$rotator 1.4s linear infinite",width:125,height:125,color:"#4C3310"},center:{textAlign:"center"}}}))(Object(m.f)(Object(p.b)((function(e){return{}}),(function(e){return{}}))($n))),tr=Object(b.a)(Object(h.a)({},Zn.amber)),ar=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.verifyToken(this.props.history)}},{key:"render",value:function(){console.log("theme: ",tr);var e=this.props,t=e.isLoggedIn,a=e.verifyTokenComplete;return Object(n.jsxs)(j.a,{theme:tr,children:[!a&&Object(n.jsx)(m.a,{component:er}),a&&Object(n.jsxs)(m.c,{children:[Object(n.jsx)(m.a,{exact:!0,path:"/",component:_n}),Object(n.jsx)(m.a,{exact:!0,path:"/faq",component:Mn}),Object(n.jsx)(m.a,{exact:!0,path:"/privacy-policy",component:Fn}),Object(n.jsx)(m.a,{exact:!0,path:"/reset-password/:token",component:In}),!t&&Object(n.jsx)(m.a,{exact:!0,path:"/standalone",component:Vn}),!t&&Object(n.jsx)(m.a,{exact:!0,path:"/login",component:Un}),!t&&Object(n.jsx)(m.a,{exact:!0,path:"/create-account",component:le}),!t&&Object(n.jsx)(m.a,{exact:!0,path:"/forgot-password",component:kn}),t&&Object(n.jsx)(m.a,{exact:!0,path:"/account",component:se}),t&&Object(n.jsx)(m.a,{exact:!0,path:"/documents",component:ma}),t&&Object(n.jsx)(m.a,{exact:!0,path:"/edit-diagram/:id",component:xn}),Object(n.jsx)(m.a,{component:Jn})]})]})}}]),a}(r.Component),nr=Object(m.f)(Object(p.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,verifyTokenComplete:e.auth.verifyTokenComplete}}),(function(e){return{verifyToken:function(t){return e(E.verifyToken(t))},getFolders:function(){return e(gt.getFolders())},getDiagrams:function(){return e(Qe.getDiagrams())},getAccount:function(){return e(ae.getAccount())}}}))(ar)),rr=a(386);var ir=function(e){var t=e.history;return Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsx)(rr.a,{}),Object(n.jsx)(m.b,{history:t,children:Object(n.jsx)(nr,{})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var cr=a(62),sr=a(201),or=a(8),lr=a.n(or),dr=a(4),ur=a(198),hr=a.n(ur),mr=a(199),pr=a.n(mr),br="ApiToken",jr=function(){return window.localStorage.getItem(br)},gr=function(e){window.localStorage.setItem(br,e)},fr=function(){window.localStorage.removeItem(br)},Or=function(e){try{return e?pr()(e):null}catch(t){return fr(),null}},xr={apiUrl:"https://delcgtquxh.execute-api.us-east-1.amazonaws.com/prod/"},vr=Object(h.a)({},xr),yr=hr.a.create({baseURL:vr.apiUrl});function Cr(){var e={accept:"application/json"},t=jr();return t&&(e.Authorization=t),e}function wr(e){return yr.get(e,{headers:Cr()})}function Dr(e,t){return yr.post(e,t,{headers:Cr()})}function Sr(e,t){return yr.put(e,t,{headers:Cr()})}function Ar(e){return yr.delete(e,{headers:Cr()})}function Er(){return wr("/api/session")}function Ir(e){return Dr("/api/session",e)}function Tr(e){return Dr("/api/google-session",e)}function kr(){return wr("/api/folders")}function Nr(e){return Dr("/api/folders",e)}function Mr(e){return Sr("/api/folders/".concat(e.id),e)}function Rr(e){return Ar("/api/folders/".concat(e))}function Fr(){return wr("/api/diagrams")}function Pr(e){return Sr("/api/diagrams/".concat(e.id),e)}function _r(e){return Dr("/api/diagrams",e)}function Lr(e){return Ar("/api/diagrams/".concat(e))}function Br(){return wr("/api/account")}function Ur(e){return Dr("/api/account",e)}function Gr(e){return Sr("/api/account",e)}function qr(){return Ar("/api/account")}function zr(e){return Dr("/api/account/password",e)}function Wr(e){return Dr("/api/account/migrate-social",e)}function Hr(e){return Dr("/api/reset-password",e)}function Kr(e){return Sr("/api/reset-password/".concat(e.token),{password:e.password})}var Yr=lr.a.mark(ti),Vr=lr.a.mark(ai),Qr=lr.a.mark(ri),Jr=lr.a.mark(ii),Xr=lr.a.mark(ci),Zr=lr.a.mark(si),$r=lr.a.mark(oi),ei=lr.a.mark(li);function ti(e){var t,a,n;return lr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(dr.c)(M.setBusy());case 3:return r.next=5,Object(dr.b)(Ir,{email:e.email,password:e.password});case 5:return t=r.sent,a=t.data.accessToken,gr(a),n=Or(a),r.next=11,Object(dr.c)(Qe.getDiagrams());case 11:return r.next=13,Object(dr.c)(gt.getFolders());case 13:return r.next=15,Object(dr.c)(ae.getAccount());case 15:return r.next=17,Object(dr.c)(E.loginSuccess(n));case 17:e.history.push("/documents"),ne.a.event({category:"user login",action:"email"}),r.next=25;break;case 21:return r.prev=21,r.t0=r.catch(0),r.next=25,Object(dr.c)(M.showToast("Error"));case 25:return r.prev=25,r.next=28,Object(dr.c)(M.clearBusy());case 28:return r.finish(25);case 29:case"end":return r.stop()}}),Yr,null,[[0,21,25,29]])}function ai(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return fr(),t.next=6,Object(dr.c)(E.logoutSuccess());case 6:return t.next=8,Object(dr.c)(Qe.getDiagramsSuccess([]));case 8:return t.next=10,Object(dr.c)(gt.getFoldersSuccess([]));case 10:return t.next=12,Object(dr.c)(ae.getAccountSuccess({}));case 12:e.history.push("/"),t.next=19;break;case 15:return t.prev=15,t.t0=t.catch(0),t.next=19,Object(dr.c)(M.showToast("Error"));case 19:return t.prev=19,t.next=22,Object(dr.c)(M.clearBusy());case 22:return t.finish(19);case 23:case"end":return t.stop()}}),Vr,null,[[0,15,19,23]])}var ni=new RegExp("^(/account|/documents|/edit-diagram)");function ri(e){var t;return lr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(dr.c)(M.setBusy());case 3:return a.next=5,Object(dr.b)(Er);case 5:if(200!==a.sent.status){a.next=18;break}return t=Or(jr()),a.next=10,Object(dr.c)(Qe.getDiagrams());case 10:return a.next=12,Object(dr.c)(gt.getFolders());case 12:return a.next=14,Object(dr.c)(ae.getAccount());case 14:return a.next=16,Object(dr.c)(E.verifyTokenSuccess(t));case 16:a.next=23;break;case 18:return ni.test(e.history.location.pathname)&&e.history.push("/"),a.next=21,Object(dr.b)(fr);case 21:return a.next=23,Object(dr.c)(E.verifyTokenFailure());case 23:a.next=32;break;case 25:return a.prev=25,a.t0=a.catch(0),ni.test(e.history.location.pathname)&&e.history.push("/"),a.next=30,Object(dr.b)(fr);case 30:return a.next=32,Object(dr.c)(E.verifyTokenFailure());case 32:return a.prev=32,a.next=35,Object(dr.c)(M.clearBusy());case 35:return a.finish(32);case 36:case"end":return a.stop()}}),Qr,null,[[0,25,32,36]])}function ii(e){var t,a,n,r;return lr.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(dr.c)(M.setBusy());case 3:return t=e.idToken,i.next=6,Object(dr.b)(Tr,{idToken:t});case 6:return a=i.sent,n=a.data.accessToken,gr(n),r=Or(n),i.next=12,Object(dr.c)(Qe.getDiagrams());case 12:return i.next=14,Object(dr.c)(gt.getFolders());case 14:return i.next=16,Object(dr.c)(ae.getAccount());case 16:return i.next=18,Object(dr.c)(E.loginSuccess(r));case 18:e.history.push("/documents"),ne.a.event({category:"user login",action:"google"}),i.next=26;break;case 22:return i.prev=22,i.t0=i.catch(0),i.next=26,Object(dr.c)(M.showToast("Error"));case 26:return i.prev=26,i.next=29,Object(dr.c)(M.clearBusy());case 29:return i.finish(26);case 30:case"end":return i.stop()}}),Jr,null,[[0,22,26,30]])}function ci(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(A.LOGIN,ti);case 2:case"end":return e.stop()}}),Xr)}function si(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(A.LOGOUT,ai);case 2:case"end":return e.stop()}}),Zr)}function oi(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(A.VERIFY_TOKEN,ri);case 2:case"end":return e.stop()}}),$r)}function li(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(A.GOOGLE_LOGIN,ii);case 2:case"end":return e.stop()}}),ei)}var di=lr.a.mark(fi),ui=lr.a.mark(Oi),hi=lr.a.mark(xi),mi=lr.a.mark(vi),pi=lr.a.mark(yi),bi=lr.a.mark(Ci),ji=lr.a.mark(wi),gi=lr.a.mark(Di);function fi(){var e,t;return lr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(dr.c)(M.setBusy());case 3:return a.next=5,Object(dr.b)(kr);case 5:return e=a.sent,t=e.data,a.next=9,Object(dr.c)(gt.getFoldersSuccess(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(dr.c)(M.showToast("Error"));case 15:return a.prev=15,a.next=18,Object(dr.c)(M.clearBusy());case 18:return a.finish(15);case 19:case"end":return a.stop()}}),di,null,[[0,11,15,19]])}function Oi(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(Nr,{name:e.name,parentId:e.parentId});case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(gt.createFolderSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),ui,null,[[0,11,15,19]])}function xi(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(Mr,e.folder);case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(gt.renameFolderSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),hi,null,[[0,11,15,19]])}function vi(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return t.next=5,Object(dr.b)(Rr,e.folderId);case 5:return t.next=7,Object(dr.c)(Qe.getDiagrams());case 7:return t.next=9,Object(dr.c)(gt.getFolders());case 9:return t.next=11,Object(dr.c)(gt.deleteFolderSuccess());case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(0),t.next=17,Object(dr.c)(M.showToast("Error"));case 17:return t.prev=17,t.next=20,Object(dr.c)(M.clearBusy());case 20:return t.finish(17);case 21:case"end":return t.stop()}}),mi,null,[[0,13,17,21]])}function yi(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(jt.GET_FOLDERS,fi);case 2:case"end":return e.stop()}}),pi)}function Ci(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(jt.CREATE_FOLDER,Oi);case 2:case"end":return e.stop()}}),bi)}function wi(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(jt.RENAME_FOLDER,xi);case 2:case"end":return e.stop()}}),ji)}function Di(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(jt.DELETE_FOLDER,vi);case 2:case"end":return e.stop()}}),gi)}var Si="er",Ai="relational",Ei="star",Ii=["Entity","Attribute","Relationship"],Ti=["Table"],ki=["Dimension","Fact"],Ni=function(e,t){return new Promise((function(a,n){var r=new FileReader;r.onabort=function(){n({name:e.name,ok:!1})},r.onerror=function(){n({name:e.name,ok:!1})},r.onload=function(r){try{var i=JSON.parse(r.target.result),c=function(e){if(e&&Array.isArray(e.shapes)){var t=e.shapes;if(-1!==t.findIndex((function(e){return Ii.includes(e.type)})))return Si;if(-1!==t.findIndex((function(e){return Ti.includes(e.type)})))return Ai;if(-1!==t.findIndex((function(e){return ki.includes(e.type)})))return Ei}throw new Error("Unkwnon Diagram Type")}(i);a({name:e.name,ok:!0,diagram:{folderId:t,name:e.name,diagramType:c,content:JSON.stringify(i)}})}catch(s){n({name:e.name,ok:!1})}},r.readAsText(e)}))},Mi=window.erd,Ri=function(e,t,a){console.log("createImage ");var n={activeItemChangedCallback:function(){},startMoveCallback:function(){},endMoveCallback:function(){},connectModeEndCallback:function(){},dirtyCallback:function(){},mouseModeResetCallback:function(){}};return new Promise((function(r,i){var c=document.createElement("canvas"),s=document.createElement("canvas"),o=new Mi.DiagramStage(c,n);new Mi.DiagramArchive(o).fromJson(e);var l=o.getBounds(!1),d=l.left*a,u=l.right*a,h=l.top*a,m=l.bottom*a,p=u-d,b=m-h;d>0&&(d-=2,p+=2),h>0&&(h-=2,b+=2),console.log("bounds ",d,h,u,m),c.width=u,c.height=m,s.width=p+50,s.height=b+50,o.setScale(a,a),o.draw();var j=s.getContext("2d");j.clearRect(0,0,s.width,s.height),t||(j.beginPath(),j.fillStyle="#fff",j.rect(0,0,s.width,s.height),j.fill()),j.drawImage(c,d,h,p,b,25,25,p,b);var g=s.toDataURL("image/png");s.toBlob((function(e){r({dataUrl:g,blob:e})}))}))},Fi=lr.a.mark(Xi),Pi=lr.a.mark(Zi),_i=lr.a.mark($i),Li=lr.a.mark(ec),Bi=lr.a.mark(tc),Ui=lr.a.mark(ac),Gi=lr.a.mark(nc),qi=lr.a.mark(rc),zi=lr.a.mark(ic),Wi=lr.a.mark(cc),Hi=lr.a.mark(sc),Ki=lr.a.mark(oc),Yi=lr.a.mark(lc),Vi=lr.a.mark(dc),Qi=lr.a.mark(uc),Ji=lr.a.mark(hc);function Xi(){var e,t;return lr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(dr.c)(M.setBusy());case 3:return a.next=5,Object(dr.b)(Fr);case 5:return e=a.sent,t=e.data,a.next=9,Object(dr.c)(Qe.getDiagramsSuccess(t));case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(dr.c)(M.showToast("Error"));case 15:return a.prev=15,a.next=18,Object(dr.c)(M.clearBusy());case 18:return a.finish(15);case 19:case"end":return a.stop()}}),Fi,null,[[0,11,15,19]])}function Zi(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(Pr,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(Qe.saveDiagramSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),Pi,null,[[0,11,15,19]])}function $i(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(_r,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(Qe.createDiagramSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),_i,null,[[0,11,15,19]])}function ec(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return t.next=5,Object(dr.b)(Lr,e.diagramId);case 5:return t.next=7,Object(dr.c)(Qe.getDiagrams());case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(dr.c)(M.showToast("Error"));case 13:return t.prev=13,t.next=16,Object(dr.c)(M.clearBusy());case 16:return t.finish(13);case 17:case"end":return t.stop()}}),Li,null,[[0,9,13,17]])}function tc(e){var t;return lr.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(dr.c)(M.setBusy());case 3:return a.next=5,Object(dr.b)(Ni,e.file,e.currentFolderId);case 5:return t=a.sent,a.next=8,Object(dr.c)(Qe.dropImportFileSuccess(t));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(0),a.next=14,Object(dr.c)(Qe.dropImportFileFailure(a.t0));case 14:return a.prev=14,a.next=17,Object(dr.c)(M.clearBusy());case 17:return a.finish(14);case 18:case"end":return a.stop()}}),Bi,null,[[0,10,14,18]])}function ac(e){var t,a,n;return lr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(dr.c)(M.setBusy());case 3:return t=e.diagrams,r.next=6,Object(dr.a)(t.map((function(e){return Object(dr.b)(_r,e)})));case 6:return a=r.sent,n=a.map((function(e){return e.data})),r.next=10,Object(dr.c)(Qe.importDiagramsSuccess(n));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(0),r.next=16,Object(dr.c)(Qe.importDiagramsFailure());case 16:return r.prev=16,r.next=19,Object(dr.c)(M.clearBusy());case 19:return r.finish(16);case 20:case"end":return r.stop()}}),Ui,null,[[0,12,16,20]])}function nc(e){var t,a,n,r;return lr.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=e.diagramContent,a=e.transparent,n=e.scale,i.next=4,Object(dr.b)(Ri,t,a,n);case 4:return r=i.sent,i.next=7,Object(dr.c)(Ct.createExportImageDataSuccess(r.dataUrl,r.blob));case 7:i.next=13;break;case 9:return i.prev=9,i.t0=i.catch(0),i.next=13,Object(dr.c)(M.showToast("Error"));case 13:case"end":return i.stop()}}),Gi,null,[[0,9]])}function rc(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.a)(e.diagrams.map((function(e){return Object(dr.b)(Pr,e)})));case 5:return t=n.sent,a=t.map((function(e){return e.data})),n.next=9,Object(dr.c)(Qe.saveManyDiagramsSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),qi,null,[[0,11,15,19]])}function ic(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.GET_DIAGRAMS,Xi);case 2:case"end":return e.stop()}}),zi)}function cc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.SAVE_DIAGRAM,Zi);case 2:case"end":return e.stop()}}),Wi)}function sc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.CREATE_DIAGRAM,$i);case 2:case"end":return e.stop()}}),Hi)}function oc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.DELETE_DIAGRAM,ec);case 2:case"end":return e.stop()}}),Ki)}function lc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.DROP_IMPORT_FILE,tc);case 2:case"end":return e.stop()}}),Yi)}function dc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.IMPORT_DIAGRAMS,ac);case 2:case"end":return e.stop()}}),Vi)}function uc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(yt.CREATE_EXPORT_IMAGE_DATA,nc);case 2:case"end":return e.stop()}}),Qi)}function hc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Ve.SAVE_MANY_DIAGRAMS,rc);case 2:case"end":return e.stop()}}),Ji)}var mc=lr.a.mark(Dc),pc=lr.a.mark(Sc),bc=lr.a.mark(Ac),jc=lr.a.mark(Ec),gc=lr.a.mark(Ic),fc=lr.a.mark(Tc),Oc=lr.a.mark(kc),xc=lr.a.mark(Nc),vc=lr.a.mark(Mc),yc=lr.a.mark(Rc),Cc=lr.a.mark(Fc),wc=lr.a.mark(Pc);function Dc(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return t.next=5,Object(dr.b)(Ur,{name:e.name,email:e.email,password:e.password});case 5:return t.next=7,Object(dr.c)(E.login(e.email,e.password,e.history));case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(0),t.next=13,Object(dr.c)(M.showToast("Error"));case 13:return t.prev=13,t.next=16,Object(dr.c)(M.clearBusy());case 16:return t.finish(13);case 17:case"end":return t.stop()}}),mc,null,[[0,9,13,17]])}function Sc(e){var t,a;return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(dr.c)(M.setBusy());case 3:return e.next=5,Object(dr.b)(Br);case 5:return t=e.sent,a=t.data,e.next=9,Object(dr.c)(ae.getAccountSuccess(a));case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(0),e.next=15,Object(dr.c)(M.showToast("Error"));case 15:return e.prev=15,e.next=18,Object(dr.c)(M.clearBusy());case 18:return e.finish(15);case 19:case"end":return e.stop()}}),pc,null,[[0,11,15,19]])}function Ac(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(Gr,{name:e.name});case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(ae.updateAccountSuccess(a));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(dr.c)(M.showToast("Error"));case 15:return n.prev=15,n.next=18,Object(dr.c)(M.clearBusy());case 18:return n.finish(15);case 19:case"end":return n.stop()}}),bc,null,[[0,11,15,19]])}function Ec(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return t=e.currentPassword,a=e.newPassword,n.next=6,Object(dr.b)(zr,{currentPassword:t,newPassword:a});case 6:return n.next=8,Object(dr.c)(ae.changePasswordSuccess());case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(dr.c)(M.showToast("Error"));case 14:return n.prev=14,n.next=17,Object(dr.c)(M.clearBusy());case 17:return n.finish(14);case 18:case"end":return n.stop()}}),jc,null,[[0,10,14,18]])}function Ic(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return t.next=5,Object(dr.b)(qr);case 5:return fr(),t.next=8,Object(dr.c)(E.logoutSuccess());case 8:return t.next=10,Object(dr.c)(Qe.getDiagramsSuccess([]));case 10:return t.next=12,Object(dr.c)(gt.getFoldersSuccess([]));case 12:return t.next=14,Object(dr.c)(ae.getAccountSuccess({}));case 14:e.history.push("/"),t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(0),t.next=21,Object(dr.c)(M.showToast("Error"));case 21:return t.prev=21,t.next=24,Object(dr.c)(M.clearBusy());case 24:return t.finish(21);case 25:case"end":return t.stop()}}),gc,null,[[0,17,21,25]])}function Tc(e){return lr.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(dr.c)(M.setBusy());case 3:return t.next=5,Object(dr.b)(Wr,{email:e.email,password:e.password});case 5:return t.next=7,Object(dr.c)(E.login(e.email,e.password,e.history));case 7:t.next=18;break;case 9:if(t.prev=9,t.t0=t.catch(0),!(t.t0.response&&t.t0.response.data&&t.t0.response.data.errors&&t.t0.response.data.errors.length>0)){t.next=16;break}return t.next=14,Object(dr.c)(M.showToast(t.t0.response.data.errors[0]));case 14:t.next=18;break;case 16:return t.next=18,Object(dr.c)(M.showToast("Error"));case 18:return t.prev=18,t.next=21,Object(dr.c)(M.clearBusy());case 21:return t.finish(18);case 22:case"end":return t.stop()}}),fc,null,[[0,9,18,22]])}function kc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.CREATE_ACCOUNT,Dc);case 2:case"end":return e.stop()}}),Oc)}function Nc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.GET_ACCOUNT,Sc);case 2:case"end":return e.stop()}}),xc)}function Mc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.UPDATE_ACCOUNT,Ac);case 2:case"end":return e.stop()}}),vc)}function Rc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.CHANGE_PASSWORD,Ec);case 2:case"end":return e.stop()}}),yc)}function Fc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.DELETE_ACCOUNT,Ic);case 2:case"end":return e.stop()}}),Cc)}function Pc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(te.DO_SOCIAL_MIGRATION,Tc);case 2:case"end":return e.stop()}}),wc)}var _c=lr.a.mark(Gc),Lc=lr.a.mark(qc),Bc=lr.a.mark(zc),Uc=lr.a.mark(Wc);function Gc(e){var t,a,n,r;return lr.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Object(dr.c)(M.setBusy());case 3:return i.next=5,Object(dr.b)(Hr,{email:e.email});case 5:return t=i.sent,a=t.data,n=a.email,r=a.duration,i.next=9,Object(dr.c)(Sn.resetPasswordStartSuccess(n,r));case 9:i.next=17;break;case 11:return i.prev=11,i.t0=i.catch(0),i.next=15,Object(dr.c)(Sn.resetPasswordStartFailure("some error"));case 15:return i.next=17,Object(dr.c)(M.showToast("Error"));case 17:return i.prev=17,i.next=20,Object(dr.c)(M.clearBusy());case 20:return i.finish(17);case 21:case"end":return i.stop()}}),_c,null,[[0,11,17,21]])}function qc(e){var t,a,n;return lr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(dr.c)(M.setBusy());case 3:return r.next=5,Object(dr.b)(Kr,{token:e.token,password:e.password});case 5:return t=r.sent,r.next=8,Object(dr.c)(Sn.resetPasswordCompleteSuccess());case 8:return a=t.data.accessToken,gr(a),n=Or(a),r.next=13,Object(dr.c)(Qe.getDiagrams());case 13:return r.next=15,Object(dr.c)(gt.getFolders());case 15:return r.next=17,Object(dr.c)(ae.getAccount());case 17:return r.next=19,Object(dr.c)(E.loginSuccess(n));case 19:e.history.push("/documents"),r.next=28;break;case 22:return r.prev=22,r.t0=r.catch(0),r.next=26,Object(dr.c)(Sn.resetPasswordCompleteFailure("some error"));case 26:return r.next=28,Object(dr.c)(M.showToast("Error"));case 28:return r.prev=28,r.next=31,Object(dr.c)(M.clearBusy());case 31:return r.finish(28);case 32:case"end":return r.stop()}}),Lc,null,[[0,22,28,32]])}function zc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Dn.RESET_PASSWORD_START,Gc);case 2:case"end":return e.stop()}}),Bc)}function Wc(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(Dn.RESET_PASSWORD_COMPLETE,qc);case 2:case"end":return e.stop()}}),Uc)}var Hc=a(25),Kc=a(171).format;function Yc(e){this.er="string"===typeof e?JSON.parse(e):e}Yc.prototype.convert=function(){return this.init(),this.convertRegularEntities(),this.convertSupertypeRelationships(),this.convertRegularRelationships(),this.convertUnaryRelationships(),this.convertPendingMultivaluedAttributes(),this.convertPendingAssociativeEntities(),this.positionTables(),this.rs},Yc.prototype.init=function(){this.pendingMultivaluedAttributes=[],this.pendingAssociativeEntities=[],this.idMap={},this.nextId=1,this.relationshipHistory=[],this.rs={version:2,www:"erdplus.com",shapes:[],connectors:[],width:this.er.width,height:this.er.height}},Yc.prototype.convertRegularEntities=function(){var e,t=this.er.shapes.filter((function(e){return"Entity"===e.type})),a=Object(Hc.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=this.newTable(n.details.id);r.details.name=n.details.name,this.convertEntityAttributes(r,n),this.rs.shapes.push(r),"associative"===n.details.type&&this.pendingAssociativeEntities.push(r)}}catch(i){a.e(i)}finally{a.f()}},Yc.prototype.convertPendingAssociativeEntities=function(){var e,t=Object(Hc.a)(this.pendingAssociativeEntities);try{for(t.s();!(e=t.n()).done;){var a,n=e.value,r=Object(Hc.a)(n.details.attributes);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.fk&&(i.pkMember=!0)}}catch(c){r.e(c)}finally{r.f()}}}catch(c){t.e(c)}finally{t.f()}},Yc.prototype.convertEntityAttributes=function(e,t){var a=this.getAttributesByOwnerId(t.details.id),n=void 0;if(!t.details.isSubtype){var r,i=Object(Hc.a)(a);try{for(i.s();!(r=i.n()).done;){var c=r.value;void 0!==n||!c.details.isUnique||"string"!==typeof c.details.name||"id"!==c.details.name.substr(-2).toLowerCase()||c.details.isDerived||c.details.isComposite||c.details.isMultivalued||(n=c.details.id)}}catch(O){i.e(O)}finally{i.f()}var s,o=Object(Hc.a)(a);try{for(o.s();!(s=o.n()).done;){var l=s.value;void 0!==n||!l.details.isUnique||l.details.isDerived||l.details.isComposite||l.details.isMultivalued||(n=l.details.id)}}catch(O){o.e(O)}finally{o.f()}var d,u=Object(Hc.a)(a);try{for(u.s();!(d=u.n()).done;){var h=d.value;void 0===n&&h.details.isUnique&&!h.details.isDerived&&h.details.isComposite&&!h.details.isMultivalued&&(n=h.details.id)}}catch(O){u.e(O)}finally{u.f()}}var m,p=Object(Hc.a)(a);try{for(p.s();!(m=p.n()).done;){var b=m.value;if(b.details.isDerived);else if(b.details.isComposite){var j=this.convertComponentAttributes(this.getAttributesByOwnerId(b.details.id));if(b.details.isUnique)if(b.details.id===n)j.forEach((function(e){e.pkMember=!0}));else{var g=j.map((function(e){return e.id}));e.details.uniqueGroups.push(g)}e.details.attributes=e.details.attributes.concat(j)}else if(b.details.isMultivalued)this.pendingMultivaluedAttributes.push({table:e,entity:t,attribute:b});else{var f=this.newColumn(b.details.id);f.names.push(b.details.name),f.optional=b.details.isOptional,b.details.isUnique&&(b.details.id===n?f.pkMember=!0:f.soloUnique=!0),e.details.attributes.push(f)}}}catch(O){p.e(O)}finally{p.f()}},Yc.prototype.convertComponentAttributes=function(e){var t,a=[],n=Object(Hc.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.newColumn(r.details.id);i.names.push(r.details.name),a.push(i)}}catch(c){n.e(c)}finally{n.f()}return a},Yc.prototype.convertPendingMultivaluedAttributes=function(){var e,t=Object(Hc.a)(this.pendingMultivaluedAttributes);try{for(t.s();!(e=t.n()).done;){var a=e.value,n=this.newColumn();n.pkMember=!0,n.names.push(a.attribute.details.name);var r=this.newTable();r.details.name=Kc("%s_%s",a.table.details.name,a.attribute.details.name),r.details.attributes.push(n),this.rs.shapes.push(r),this.connectTables(a.table,r).pkMember=!0}}catch(i){t.e(i)}finally{t.f()}},Yc.prototype.convertRegularRelationships=function(){var e,t=this.er.shapes.filter((function(e){return"Relationship"===e.type&&e.details.slots[0].entityId!==e.details.slots[1].entityId})),a=Object(Hc.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;n.details.isIdentifying&&this.convertOneRelationship(n)}}catch(s){a.e(s)}finally{a.f()}var r,i=Object(Hc.a)(t);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.details.isIdentifying||this.convertOneRelationship(c)}}catch(s){i.e(s)}finally{i.f()}},Yc.prototype.convertSupertypeRelationships=function(){var e,t=this.er.connectors.filter((function(e){return"Connector"===e.type&&e.details.isSupertypeConnector})),a=Object(Hc.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value;this.connectTables(n.destination,n.source).pkMember=!0}}catch(r){a.e(r)}finally{a.f()}},Yc.prototype.convertOneRelationship=function(e){var t,a=e.details.slots;if("one"===a[0].cardinality&&"one"===a[1].cardinality)"optional"===a[0].participation&&"optional"===a[1].participation?(t=this.connectTables(a[0].entityId,a[1].entityId,e)).optional=!0:t="mandatory"===a[1].participation?this.connectTables(a[0].entityId,a[1].entityId,e):this.connectTables(a[1].entityId,a[0].entityId,e),t.pkMember=e.details.isIdentifying;else if("one"===a[0].cardinality&&"many"===a[1].cardinality){var n=this.connectTables(a[1].entityId,a[0].entityId,e);n.optional="optional"===a[0].participation,n.pkMember=e.details.isIdentifying}else if("many"===a[0].cardinality&&"one"===a[1].cardinality){var r=this.connectTables(a[0].entityId,a[1].entityId,e);r.optional="optional"===a[1].participation,r.pkMember=e.details.isIdentifying}else if("many"===a[0].cardinality&&"many"===a[1].cardinality){var i=this.newTable(e.details.id);this.rs.shapes.push(i),i.details.name=e.details.name;var c,s=this.connectTables(a[0].entityId,i,e),o=this.connectTables(a[1].entityId,i,e),l=!1,d=this.getAttributesByOwnerId(e.details.id),u=Object(Hc.a)(d);try{for(u.s();!(c=u.n()).done;){var h=c.value,m=this.newColumn(h.details.id);m.names.push(h.details.name),!l&&h.details.isUnique&&(m.pkMember=!0,l=!0),i.details.attributes.push(m)}}catch(p){u.e(p)}finally{u.f()}l?i.details.uniqueGroups.push([s.id,o.id]):(s.pkMember=!0,o.pkMember=!0)}},Yc.prototype.convertUnaryRelationships=function(){var e,t=this.er.shapes.filter((function(e){return"Relationship"===e.type&&!e.details.isIdentifying&&e.details.slots[0].entityId===e.details.slots[1].entityId})),a=Object(Hc.a)(t);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=n.details.slots;if("one"===r[0].cardinality||"one"===r[1].cardinality){var i=this.connectTables(r[0].entityId,r[1].entityId,n);i.names[0]=Kc("%s_%s",n.details.name,i.names[0]),i.optional="optional"===r[0].participation||"optional"===r[1].participation}else if("many"===r[0].cardinality&&"many"===r[1].cardinality){var c=this.newTable(n.details.id);c.details.name=n.details.name,this.rs.shapes.push(c);var s=this.connectTables(r[0].entityId,n.details.id,n);s.names[0]=Kc("%s_1",s.names[0]),s.pkMember=!0;var o=this.connectTables(r[0].entityId,n.details.id,n);o.names[0]=Kc("%s_2",o.names[0]),o.pkMember=!0}}}catch(l){a.e(l)}finally{a.f()}},Yc.prototype.newTable=function(e){return{type:"Table",details:{name:"",x:0,y:0,sort:"automatic",attributes:[],uniqueGroups:[],id:this.mapId(e)}}},Yc.prototype.newColumn=function(e){return{names:[],order:0,pkMember:!1,optional:!1,soloUnique:!1,fk:!1,dataType:"int",dataTypeSize:null,id:this.mapId(e)}},Yc.prototype.newConnector=function(){return{type:"TableConnector",details:{fkAttributeId:null,id:this.mapId()},source:null,destination:null}},Yc.prototype.createFk=function(e){var t=this.newColumn();t.references=[],t.fk=!0;for(var a=0;a<e.details.attributes.length;++a){var n=e.details.attributes[a];if(n.pkMember)if(n.fk)for(var r=0;r<n.names.length;++r)t.names.push(n.names[r]),t.references.push({tableId:e.details.id,attributeId:n.id,fkSubIndex:r});else t.names.push(n.names[0]),t.references.push({tableId:e.details.id,attributeId:n.id})}return t},Yc.prototype.connectTables=function(e,t,a){"number"===typeof e&&(e=this.findTableyByMappedId(e)),"number"===typeof t&&(t=this.findTableyByMappedId(t));var n=this.recordRelationshipHistory(e.details.id,t.details.id),r=this.createFk(e);if(t.details.attributes.push(r),n>1){var i,c=[],s=Object(Hc.a)(r.names);try{for(s.s();!(i=s.n()).done;){var o=i.value;c.push(a.details.name+o)}}catch(d){s.e(d)}finally{s.f()}r.names=c}var l=this.newConnector();return l.details.fkAttributeId=r.id,l.source=e.details.id,l.destination=t.details.id,this.rs.connectors.push(l),r},Yc.prototype.recordRelationshipHistory=function(e,t){var a=this.relationshipHistory.find((function(a){return a.pkTableId===e&&a.fkTableId===t}));return a?(a.count=a.count+1,a.count):(this.relationshipHistory.push({pkTableId:e,fkTableId:t,count:1}),1)},Yc.prototype.mapId=function(e){if(this.idMap.hasOwnProperty(e))return this.idMap[e];var t=this.nextId;return this.nextId+=1,"number"===typeof e&&(this.idMap[e]=t),t},Yc.prototype.positionTables=function(){for(var e=this.rs.shapes.filter((function(e){return"Table"===e.type})),t=Math.ceil(Math.sqrt(e.length)),a=10,n=0;n<e.length;){var r=e.slice(n,n+t);n+=t;for(var i=0,c=0;c<r.length;++c){var s=r[c];i=Math.max(i,s.details.attributes.length),s.details.x=10+165*c,s.details.y=a}a+=15*(i+1)}},Yc.prototype.getAttributesByOwnerId=function(e){var t=this;return this.er.shapes.filter((function(a){return"Attribute"===a.type&&t.er.connectors.some((function(t){return t.source===a.details.id&&t.destination===e}))}),this)},Yc.prototype.findTableyByMappedId=function(e){var t=this.mapId(e);return this.rs.shapes.find((function(e){return"Table"===e.type&&e.details.id===t}))};var Vc=Yc,Qc=a(171).format;function Jc(e){this.diagram="string"===typeof e?JSON.parse(e):e}Jc.prototype.columnTypes=[{id:"none",name:"No Data Type",sql:"NODATATYPE",hasSize:!1},{id:"custom",name:"Custom Data Type",sql:"",hasSize:!0},{id:"charn",name:"CHAR(n)",sql:"CHAR",hasSize:!0},{id:"varcharn",name:"VARCHAR(n)",sql:"VARCHAR",hasSize:!0},{id:"int",name:"INT",sql:"INT",hasSize:!1},{id:"numeric",name:"NUMERIC(p s)",sql:"NUMERIC",hasSize:!0},{id:"date",name:"DATE",sql:"DATE",hasSize:!1},{id:"float",name:"FLOAT",sql:"FLOAT",hasSize:!1}],Jc.prototype.generate=function(){return this.initSqlTables(),this.processAttributes(),this.processUnique(),this.resolveFkColumnDataTypes(),this.resolveFkReferenceNames(),this.sortTables(),this.toSqlLines(),this.toSql()},Jc.prototype.initSqlTables=function(){this.tables={};var e,t=Object(Hc.a)(this.diagram.shapes);try{for(t.s();!(e=t.n()).done;){var a=e.value;"Table"!==a.type&&"Fact"!==a.type&&"Dimension"!==a.type||(this.tables[a.details.id]={name:a.details.name,original:a,columns:{},foreignKeys:[],requiredTables:[]})}}catch(n){t.e(n)}finally{t.f()}},Jc.prototype.processAttributes=function(){for(var e in this.tables){var t,a=this.tables[e],n=Object(Hc.a)(a.original.details.attributes);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.fk){a.foreignKeys.push({names:r.names,references:r.references});var i=0;for(var c in r.names){var s=r.names[c],o=r.references[i];a.columns[Qc("%s-%s",r.id,i)]={name:s,pkMember:r.pkMember,optional:r.optional,fk:!0,reference:{tableId:o.tableId,columnId:o.attributeId,fkSubIndex:o.fkSubIndex}},i+=1}}else a.columns[r.id]={name:r.names[0],pkMember:r.pkMember,optional:r.optional,dataType:this.getSqlDataType(r.dataType,r.dataTypeSize)}}}catch(l){n.e(l)}finally{n.f()}}},Jc.prototype.processUnique=function(){for(var e in this.tables){var t=this.tables[e];t.unique=[];var a,n=Object(Hc.a)(t.original.details.attributes);try{for(n.s();!(a=n.n()).done;){var r=a.value;r.soloUnique&&!r.pkMember&&t.unique.push([r.id])}}catch(i){n.e(i)}finally{n.f()}t.unique=t.unique.concat(t.original.details.uniqueGroups)}},Jc.prototype.resolveFkColumnDataTypes=function(){for(var e in this.tables){var t=this.tables[e];for(var a in t.columns){var n=t.columns[a];n.fk&&(n.dataType=this.resolveDataType(n.reference.tableId,n.reference.columnId,n.reference.fkSubIndex))}}},Jc.prototype.resolveDataType=function(e,t,a){var n=void 0;if("number"===typeof a){var r=Qc("%s-%s",t,a);n=this.tables[e].columns[r]}else n=this.tables[e].columns[t];if(void 0===n)return"(not found)";if("string"===typeof n.dataType)return n.dataType;if(n.fk){var i=this.resolveDataType(n.reference.tableId,n.reference.columnId,n.reference.fkSubIndex);return n.dataType=i,i}},Jc.prototype.resolveFkReferenceNames=function(){for(var e in this.tables){var t,a=this.tables[e],n=Object(Hc.a)(a.foreignKeys);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.references[0].tableId;r.referencedTableName=this.tables[i].name;var c,s=Object(Hc.a)(r.references);try{for(s.s();!(c=s.n()).done;){var o=c.value,l=this.resolveFkReferenceName(o.tableId,o.attributeId,o.fkSubIndex);o.name=l}}catch(d){s.e(d)}finally{s.f()}}}catch(d){n.e(d)}finally{n.f()}}},Jc.prototype.resolveFkReferenceName=function(e,t,a){var n=void 0;if("number"===typeof a){var r=Qc("%s-%s",t,a);n=this.tables[e].columns[r]}else n=this.tables[e].columns[t];return n?n.name:"missing"},Jc.prototype.resolveAllFkReferenceNames=function(e,t){for(var a=[],n=0,r=Qc("%s-%s",t,n);e.columns.hasOwnProperty(r);)a.push(e.columns[r].name),r=Qc("%s-%s",t,n+=1);return a},Jc.prototype.sortTables=function(){var e,t=Object(Hc.a)(this.diagram.connectors);try{for(t.s();!(e=t.n()).done;){var a=e.value;if("TableConnector"===a.type){var n=a.source,r=a.destination;this.tables[r].requiredTables.push(n)}}}catch(p){t.e(p)}finally{t.f()}var i=[],c=0,s={};do{for(var o in c=0,this.tables){var l,d=!0,u=Object(Hc.a)(this.tables[o].requiredTables);try{for(u.s();!(l=u.n()).done;){var h=l.value;d=d&&s[h]}}catch(p){u.e(p)}finally{u.f()}d&&(c+=1,i.push(this.tables[o]),delete this.tables[o],s[o]=!0)}}while(c>0);for(var m in this.tables)i.push(this.tables[m]),delete this.tables[m];this.tables=i},Jc.prototype.toSqlLines=function(){var e,t=Object(Hc.a)(this.tables);try{for(t.s();!(e=t.n()).done;){var a=e.value;a.lines=[],a.lines.push(this.formatCreateTable(a.name)),a.lines.push("(");var n=[];for(var r in a.columns){var i=a.columns[r];n.push(this.formatColumn(i.name,i.dataType,i.optional))}var c=[];for(var s in a.columns){var o=a.columns[s];o.pkMember&&c.push(o.name)}c.length>0&&n.push(this.formatPrimaryKey(c));var l,d=Object(Hc.a)(a.foreignKeys);try{for(d.s();!(l=d.n()).done;){var u=l.value,h=u.references.map((function(e){return e.name}));n.push(this.formatForeignKey(u.names,h,u.referencedTableName))}}catch(y){d.e(y)}finally{d.f()}var m,p=Object(Hc.a)(a.unique);try{for(p.s();!(m=p.n()).done;){var b,j=m.value,g=[],f=Object(Hc.a)(j);try{for(f.s();!(b=f.n()).done;){var O=b.value;if(void 0===a.columns[O]){var x=this.resolveAllFkReferenceNames(a,O);g=g.concat(x)}else g.push(a.columns[O].name)}}catch(y){f.e(y)}finally{f.f()}n.push(this.formatUnique(g))}}catch(y){p.e(y)}finally{p.f()}for(var v=0;v<n.length-1;++v)n[v]=n[v]+",";a.lines=a.lines.concat(n),a.lines.push(");"),a.lines.push("")}}catch(y){t.e(y)}finally{t.f()}},Jc.prototype.toSql=function(){var e,t=[],a=Object(Hc.a)(this.tables);try{for(a.s();!(e=a.n()).done;){var n=e.value;t=t.concat(n.lines)}}catch(r){a.e(r)}finally{a.f()}return t.join("\n")},Jc.prototype.formatCreateTable=function(e){return Qc("CREATE TABLE %s",this.sanitizeName(e))},Jc.prototype.formatColumn=function(e,t,a){return Qc(a?"  %s %s":"  %s %s NOT NULL",this.sanitizeName(e),t)},Jc.prototype.formatUnique=function(e){return Qc("  UNIQUE (%s)",this.sanitizeName(e).join(", "))},Jc.prototype.formatPrimaryKey=function(e){return Qc("  PRIMARY KEY (%s)",this.sanitizeName(e).join(", "))},Jc.prototype.formatForeignKey=function(e,t,a){return Qc("  FOREIGN KEY (%s) REFERENCES %s(%s)",this.sanitizeName(e).join(", "),this.sanitizeName(a),this.sanitizeName(t).join(", "))},Jc.prototype.getSqlDataType=function(e,t){if("custom"===e)return t;var a=t;return"string"===typeof a&&a.length>0?("("!==a.charAt(0)&&(a="("+a),")"!==a.charAt(a.length-1)&&(a+=")")):a="",Qc("%s%s",this.mapSqlDataType(e),a)},Jc.prototype.mapSqlDataType=function(e){for(var t=0;t<this.columnTypes.length;++t){var a=this.columnTypes[t];if(a.id===e)return a.sql}return e},Jc.prototype.sanitizeName=function(e){if(Array.isArray(e)){var t,a=[],n=Object(Hc.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.push(this.sanitizeName(r))}}catch(i){n.e(i)}finally{n.f()}return a}return e.replace(new RegExp(" ","g"),"_")};var Xc=Jc,Zc=lr.a.mark(as),$c=lr.a.mark(ns),es=lr.a.mark(rs),ts=lr.a.mark(is);function as(e){var t,a,n,r,i,c,s,o,l,d;return lr.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.next=3,Object(dr.c)(M.setBusy());case 3:return t=e.folderId,a=e.name,n=e.content,r=e.edit,i=e.history,c=new Vc(n),s=JSON.stringify(c.convert()),o={folderId:t,name:a,content:s,diagramType:"relational"},u.next=9,Object(dr.b)(_r,o);case 9:return l=u.sent,d=l.data,u.next=13,Object(dr.c)(Qe.createDiagramSuccess(d));case 13:return u.next=15,Object(dr.c)(tt.hideConvertToRelationalDialog());case 15:r&&i.push("/edit-diagram/".concat(d.id)),u.next=22;break;case 18:return u.prev=18,u.t0=u.catch(0),u.next=22,Object(dr.c)(M.showToast("Error"));case 22:return u.prev=22,u.next=25,Object(dr.c)(M.clearBusy());case 25:return u.finish(22);case 26:case"end":return u.stop()}}),Zc,null,[[0,18,22,26]])}function ns(e){var t,a,n;return lr.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(dr.c)(M.setBusy());case 3:return t=e.content,a=new Xc(t),n=a.generate(),r.next=8,Object(dr.c)(tt.generateSqlSuccess(n));case 8:r.next=16;break;case 10:return r.prev=10,r.t0=r.catch(0),r.next=14,Object(dr.c)(M.showToast("Error"));case 14:return r.next=16,Object(dr.c)(tt.generateSqlFailure());case 16:return r.prev=16,r.next=19,Object(dr.c)(M.clearBusy());case 19:return r.finish(16);case 20:case"end":return r.stop()}}),$c,null,[[0,10,16,20]])}function rs(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(et.CONVERT_TO_RELATIONAL,as);case 2:case"end":return e.stop()}}),es)}function is(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(et.GENERATE_SQL,ns);case 2:case"end":return e.stop()}}),ts)}var cs=lr.a.mark(os),ss=lr.a.mark(ls);function os(e){var t,a;return lr.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(dr.c)(M.setBusy());case 3:return n.next=5,Object(dr.b)(Pr,e.diagram);case 5:return t=n.sent,a=t.data,n.next=9,Object(dr.c)(Qe.saveDiagramSuccess(a));case 9:return n.next=11,Object(dr.c)(Ct.setIsDirty(!1));case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(dr.c)(M.showToast("Error"));case 17:return n.prev=17,n.next=20,Object(dr.c)(M.clearBusy());case 20:return n.finish(17);case 21:case"end":return n.stop()}}),cs,null,[[0,13,17,21]])}function ls(){return lr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dr.d)(yt.SAVE_EDIT_DIAGRAM,os);case 2:case"end":return e.stop()}}),ss)}var ds=Object(cr.c)({account:ee,auth:S,diagram:Ye,edit:vt,folder:bt,resetPassword:wn,convert:$e,global:N}),us=a(42);ne.a.initialize("UA-28400705-1",{titleCase:!1,debug:!0});var hs,ms=Object(us.a)(),ps=function(){var e=Object(sr.a)(),t=[e].map((function(e){return Object(cr.a)(e)})),a=cr.d.apply(void 0,Object(de.a)(t)),n=Object(cr.e)(ds,{},a);return e.run(ci),e.run(si),e.run(oi),e.run(li),e.run(yi),e.run(Ci),e.run(wi),e.run(Di),e.run(ic),e.run(cc),e.run(sc),e.run(oc),e.run(lc),e.run(dc),e.run(uc),e.run(hc),e.run(kc),e.run(Nc),e.run(Mc),e.run(Rc),e.run(Fc),e.run(Pc),e.run(zc),e.run(Wc),e.run(rs),e.run(is),e.run(ls),n}();hs=ir,s.a.render(Object(n.jsx)(p.a,{store:ps,children:Object(n.jsx)(hs,{history:ms})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[317,1,2]]]);
//# sourceMappingURL=main.ccca8246.chunk.js.map